<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ACIDIC Clothing - Innovative Fashion</title>
    <style>
      /* ====== BASE ====== */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: "Poppins", sans-serif;
        background: #ffffff;
        color: #0e0c0c;
        overflow-x: hidden;
      }

      /* ====== HEADER ====== */
      header {
        background: #000;
        color: #ffffff;
        padding: 20px 40px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: sticky;
        top: 0;
        z-index: 1000;
      }

      /* Gold glow on brand */
      header h1 {
        font-size: 24px;
        letter-spacing: 2px;
        color: #fff3c2;
        animation: goldGlowFlicker 3s infinite alternate;
      }

      nav ul {
        display: flex;
        gap: 30px;
        list-style: none;
      }
      nav li {
        cursor: pointer;
        transition: 0.3s;
        padding: 5px 10px;
        border-radius: 5px;
      }
      nav li:hover {
        color: #f4b400;
        background: rgba(244, 180, 0, 0.1);
      }

      /* ====== HERO SLIDESHOW ====== */
      .hero {
        position: relative;
        height: 70vh;
        overflow: hidden;
      }
      .hero-slides {
        height: 100%;
        position: relative;
      }
      .hero-slide {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-size: cover;
        background-position: center;
        opacity: 0;
        transition: opacity 1s ease-in-out;
        background-color: #f0f0f0; /* Fallback color */
      }
      .hero-slide.active {
        opacity: 1;
      }

      /* HERO CONTENT */
      .hero-content {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        color: white;
        text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.8);
        z-index: 2;
        font-weight: bolder;
        font-style: oblique;
      }
      .hero-content h2 {
        font-size: 48px;
        margin-bottom: 10px;
        color: #fff3c2;
        animation: goldGlowFlicker 2.5s infinite alternate;
      }
      .hero-content p {
        font-size: 24px;
        letter-spacing: 3px;
        color: #f8e49c;
        animation: trackPulse 3s ease-in-out infinite;
      }

      /* === GOLD GLOW FLICKER ANIMATION === */
      @keyframes goldGlowFlicker {
        0%,
        19%,
        21%,
        23%,
        25%,
        54%,
        56%,
        100% {
          text-shadow: 0 0 5px #fff8d9, 0 0 10px #f4b400, 0 0 20px #f4b400,
            0 0 40px #f4b400, 0 0 80px #f4b400;
          opacity: 1;
        }
        20%,
        24%,
        55% {
          text-shadow: none;
          opacity: 0.6;
        }
      }

      /* === TRACKING EXPAND/CONTRACT === */
      @keyframes trackPulse {
        0%,
        100% {
          letter-spacing: 3px;
          opacity: 1;
        }
        50% {
          letter-spacing: 8px;
          opacity: 0.85;
        }
      }

      /* Slideshow controls */
      .slideshow-controls {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 10px;
        z-index: 3;
      }
      .slideshow-dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background-color: rgba(255, 255, 255, 0.5);
        cursor: pointer;
        transition: background-color 0.3s;
      }
      .slideshow-dot.active {
        background-color: white;
      }
      .slideshow-nav {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background-color: rgba(0, 0, 0, 0.5);
        color: white;
        border: none;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        z-index: 3;
        font-size: 18px;
        transition: background-color 0.3s;
      }
      .slideshow-nav:hover {
        background-color: rgba(0, 0, 0, 0.8);
      }
      .slideshow-prev {
        left: 20px;
      }
      .slideshow-next {
        right: 20px;
      }

      /* ====== PRODUCTS ====== */
      .products {
        padding: 60px 40px;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 30px;
        opacity: 0;
        transform: translateX(50px);
        transition: all 0.6s ease;
      }
      .products.active {
        opacity: 1;
        transform: translateX(0);
      }
      .product {
        background: #fff;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s, box-shadow 0.3s;
        cursor: pointer;
      }
      .product:hover {
        transform: translateY(-8px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
      }
      .product img {
        width: 100%;
        height: 280px;
        object-fit: cover;
        background: #f0f0f0; /* Fallback for missing images */
      }
      .product-info {
        text-align: center;
        padding: 15px;
      }
      .add-to-cart {
        background: #000;
        color: #fff;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        transition: 0.3s;
        margin: 5px;
      }
      .add-to-cart:hover {
        background: #f4b400;
        color: #000;
      }

      /* ====== INNOVATIVE FEATURES ====== */

      /* AI Stylist Section */
      .ai-stylist-section,
      .virtual-tryon,
      .sustainability,
      .community,
      .loyalty-program,
      .outfit-builder {
        padding: 60px 40px;
        background: #fff;
        margin: 20px 0;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .stylist-container,
      .tryon-container,
      .impact-container {
        max-width: 1200px;
        margin: 0 auto;
      }

      .style-quiz {
        background: #f9f9f9;
        padding: 30px;
        border-radius: 10px;
        margin-bottom: 30px;
      }

      .quiz-step {
        text-align: center;
      }

      .quiz-step button {
        background: #000;
        color: white;
        border: none;
        padding: 12px 24px;
        margin: 10px;
        border-radius: 5px;
        cursor: pointer;
        transition: 0.3s;
      }

      .quiz-step button:hover {
        background: #f4b400;
        color: #000;
      }

      .ai-recommendations {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 20px;
        margin-top: 30px;
      }

      /* Virtual Try-On */
      .tryon-interface {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        margin-top: 30px;
      }

      #webcam,
      #tryon-canvas {
        width: 100%;
        height: 400px;
        border-radius: 10px;
        background: #f0f0f0;
        border: 2px dashed #ccc;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #666;
      }

      .tryon-products {
        display: flex;
        flex-direction: column;
        gap: 15px;
      }

      .tryon-item {
        display: flex;
        align-items: center;
        gap: 15px;
        padding: 15px;
        background: #f9f9f9;
        border-radius: 8px;
        cursor: pointer;
        transition: 0.3s;
      }

      .tryon-item:hover {
        background: #e9e9e9;
      }

      .tryon-item img {
        width: 60px;
        height: 60px;
        object-fit: cover;
        border-radius: 5px;
      }

      /* Sustainability */
      .impact-stats {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
        text-align: center;
        margin-top: 30px;
      }

      .stat {
        padding: 30px 20px;
        background: #f9f9f9;
        border-radius: 10px;
      }

      .stat h3 {
        font-size: 2.5em;
        color: #f4b400;
        margin-bottom: 10px;
      }

      /* Community */
      .user-gallery {
        margin-top: 30px;
      }

      .user-photos {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 15px;
        margin: 20px 0;
      }

      .user-photo {
        width: 100%;
        height: 200px;
        object-fit: cover;
        border-radius: 8px;
        background: #f0f0f0;
      }

      /* Loyalty Program */
      .loyalty-card {
        background: linear-gradient(135deg, #000 0%, #333 100%);
        color: white;
        padding: 30px;
        border-radius: 15px;
        margin-top: 30px;
      }

      .points-display {
        text-align: center;
        margin-bottom: 30px;
      }

      .progress-bar {
        width: 100%;
        height: 20px;
        background: #444;
        border-radius: 10px;
        margin: 15px 0;
        overflow: hidden;
      }

      .progress {
        height: 100%;
        background: #f4b400;
        width: 35%;
        transition: width 1s ease;
      }

      .rewards {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
      }

      .reward-tier {
        background: rgba(255, 255, 255, 0.1);
        padding: 20px;
        border-radius: 10px;
        text-align: center;
      }

      /* Outfit Builder */
      .outfit-canvas {
        display: grid;
        grid-template-columns: 1fr 300px;
        gap: 30px;
        height: 500px;
        margin-top: 30px;
      }

      .outfit-layers {
        background: #f9f9f9;
        border-radius: 10px;
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 2px dashed #ccc;
      }

      .layer {
        position: absolute;
        text-align: center;
        padding: 20px;
      }

      .product-selector {
        background: #f9f9f9;
        border-radius: 10px;
        padding: 20px;
        overflow-y: auto;
      }

      .category-selector {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
      }

      .category-selector button {
        flex: 1;
        padding: 10px;
        background: #000;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
      }

      .category-selector button:hover {
        background: #f4b400;
        color: #000;
      }

      .outfit-products {
        display: grid;
        grid-template-columns: 1fr;
        gap: 10px;
        max-height: 300px;
        overflow-y: auto;
      }

      .outfit-product {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px;
        background: white;
        border-radius: 5px;
        cursor: pointer;
        border: 1px solid #eee;
      }

      .outfit-product:hover {
        background: #f9f9f9;
      }

      .outfit-product img {
        width: 50px;
        height: 50px;
        object-fit: cover;
        border-radius: 5px;
      }

      .add-outfit-to-cart {
        width: 100%;
        padding: 15px;
        background: #000;
        color: white;
        border: none;
        border-radius: 5px;
        margin-top: 20px;
        cursor: pointer;
        font-weight: bold;
      }

      .add-outfit-to-cart:hover {
        background: #f4b400;
        color: #000;
      }

      /* Customization Modal */
      .customization-options {
        display: flex;
        flex-direction: column;
        gap: 20px;
      }

      .color-picker {
        margin-bottom: 20px;
      }

      .color-options {
        display: flex;
        gap: 10px;
        margin-top: 10px;
      }

      .color-option {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        cursor: pointer;
        border: 2px solid transparent;
        transition: transform 0.2s;
      }

      .color-option:hover {
        transform: scale(1.1);
      }

      .color-option.active {
        border-color: #f4b400;
        transform: scale(1.1);
      }

      /* CART SIDEBAR */
      .cart-sidebar {
        position: fixed;
        right: -400px;
        top: 0;
        width: 350px;
        height: 100%;
        background: #fff;
        box-shadow: -2px 0 15px rgba(0, 0, 0, 0.2);
        transition: right 0.4s ease;
        z-index: 2000;
        padding: 20px;
        display: flex;
        flex-direction: column;
      }
      .cart-sidebar.active {
        right: 0;
      }
      .cart-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 1px solid #eee;
      }
      .cart-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid #ddd;
        padding: 10px 0;
      }
      .cart-item button {
        background: #ff4444;
        color: white;
        border: none;
        padding: 5px 10px;
        border-radius: 3px;
        cursor: pointer;
      }
      .cart-footer {
        margin-top: auto;
        padding-top: 20px;
        border-top: 1px solid #eee;
      }
      .checkout-btn {
        background: #000;
        color: #fff;
        border: none;
        width: 100%;
        padding: 10px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        margin-top: 10px;
      }
      .checkout-btn:hover {
        background: #f4b400;
        color: #000;
      }

      footer {
        background: #000;
        color: #fff;
        text-align: center;
        padding: 25px;
        margin-top: 50px;
      }

      footer a {
        color: #f4b400;
        margin: 0 10px;
        text-decoration: none;
      }

      footer a:hover {
        text-decoration: underline;
      }

      /* ====== MODAL ====== */
      .modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 3000;
      }
      .modal.active {
        display: flex;
      }
      .modal-content {
        background: #fff;
        border-radius: 10px;
        padding: 20px;
        max-width: 450px;
        width: 90%;
        text-align: center;
        position: relative;
        max-height: 90vh;
        overflow-y: auto;
      }
      .close-modal {
        position: absolute;
        top: 10px;
        right: 15px;
        font-size: 22px;
        cursor: pointer;
        font-weight: bold;
        background: none;
        border: none;
        color: #333;
      }

      /* Checkout form */
      .checkout-form input,
      .checkout-form select {
        width: 100%;
        padding: 8px;
        margin: 8px 0;
        border: 1px solid #ddd;
        border-radius: 5px;
        font-size: 14px;
      }

      .checkout-form input.error {
        border-color: #ff4444;
        background-color: #fff5f5;
      }

      .error-message {
        color: #ff4444;
        font-size: 12px;
        margin-top: 4px;
        display: none;
      }

      .confirm-payment {
        background: #000;
        color: #fff;
        border: none;
        padding: 10px 20px;
        width: 100%;
        border-radius: 5px;
        cursor: pointer;
        margin-top: 10px;
        font-size: 16px;
      }
      .confirm-payment:hover {
        background: #f4b400;
        color: #000;
      }

      /* ====== SIGN UP PAGE ====== */
      .signup-section {
        display: none;
        padding: 60px 20px;
        background: linear-gradient(135deg, #000000 0%, #1a1a1a 100%);
        min-height: 80vh;
        align-items: center;
        justify-content: center;
      }

      .signup-section.active {
        display: flex;
      }

      .signup-container {
        max-width: 350px;
        background: #f8f9fd;
        background: linear-gradient(
          0deg,
          rgb(255, 255, 255) 0%,
          rgb(244, 247, 251) 100%
        );
        border-radius: 40px;
        padding: 25px 35px;
        border: 5px solid rgb(255, 255, 255);
        box-shadow: rgba(133, 189, 215, 0.8784313725) 0px 30px 30px -20px;
        margin: 20px;
      }

      .signup-heading {
        text-align: center;
        font-weight: 900;
        font-size: 30px;
        color: #000;
        margin-bottom: 10px;
      }

      .signup-subheading {
        text-align: center;
        font-size: 14px;
        color: #666;
        margin-bottom: 20px;
      }

      .signup-form {
        margin-top: 20px;
      }

      .signup-form .input {
        width: 100%;
        background: white;
        border: none;
        padding: 15px 20px;
        border-radius: 20px;
        margin-top: 15px;
        box-shadow: #cff0ff 0px 10px 10px -5px;
        border-inline: 2px solid transparent;
      }

      .signup-form .input:focus {
        outline: none;
        border-inline: 2px solid #f4b400;
      }

      .signup-button {
        display: block;
        width: 100%;
        font-weight: bold;
        background: linear-gradient(45deg, #000 0%, #333 100%);
        color: white;
        padding-block: 15px;
        margin: 20px auto;
        border-radius: 20px;
        box-shadow: rgba(133, 189, 215, 0.8784313725) 0px 20px 10px -15px;
        border: none;
        transition: all 0.2s ease-in-out;
        cursor: pointer;
      }

      .signup-button:hover {
        transform: scale(1.03);
        box-shadow: rgba(133, 189, 215, 0.8784313725) 0px 23px 10px -20px;
        background: linear-gradient(45deg, #f4b400 0%, #ffd700 100%);
        color: #000;
      }

      .signup-button:active {
        transform: scale(0.95);
        box-shadow: rgba(133, 189, 215, 0.8784313725) 0px 15px 10px -10px;
      }

      .social-account-container {
        margin-top: 25px;
      }

      .social-account-container .title {
        display: block;
        text-align: center;
        font-size: 10px;
        color: rgb(170, 170, 170);
      }

      .social-account-container .social-accounts {
        width: 100%;
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-top: 5px;
      }

      .social-account-container .social-accounts .social-button {
        background: linear-gradient(
          45deg,
          rgb(0, 0, 0) 0%,
          rgb(112, 112, 112) 100%
        );
        border: 5px solid white;
        padding: 5px;
        border-radius: 50%;
        width: 40px;
        aspect-ratio: 1;
        display: grid;
        place-content: center;
        box-shadow: rgba(133, 189, 215, 0.8784313725) 0px 12px 10px -8px;
        transition: all 0.2s ease-in-out;
        cursor: pointer;
      }

      .social-account-container .social-accounts .social-button .svg {
        fill: white;
        margin: auto;
      }

      .social-account-container .social-accounts .social-button:hover {
        transform: scale(1.2);
      }

      .social-account-container .social-accounts .social-button:active {
        transform: scale(0.9);
      }

      .agreement {
        display: block;
        text-align: center;
        margin-top: 15px;
      }

      .agreement a {
        text-decoration: none;
        color: #0099ff;
        font-size: 9px;
      }

      .login-link {
        text-align: center;
        margin-top: 15px;
        font-size: 14px;
      }

      .login-link a {
        color: #f4b400;
        text-decoration: none;
        font-weight: bold;
      }

      .login-link a:hover {
        text-decoration: underline;
      }

      /* ====== LOGIN PAGE ====== */
      .login-section {
        display: none;
        padding: 60px 20px;
        background: linear-gradient(135deg, #000000 0%, #1a1a1a 100%);
        min-height: 80vh;
        align-items: center;
        justify-content: center;
      }

      .login-section.active {
        display: flex;
      }

      .container {
        max-width: 350px;
        background: #f8f9fd;
        background: linear-gradient(
          0deg,
          rgb(255, 255, 255) 0%,
          rgb(244, 247, 251) 100%
        );
        border-radius: 40px;
        padding: 25px 35px;
        border: 5px solid rgb(255, 255, 255);
        box-shadow: rgba(133, 189, 215, 0.8784313725) 0px 30px 30px -20px;
        margin: 20px;
      }

      .heading {
        text-align: center;
        font-weight: 900;
        font-size: 30px;
        color: rgb(16, 137, 211);
      }

      .form {
        margin-top: 20px;
      }

      .form .input {
        width: 100%;
        background: white;
        border: none;
        padding: 15px 20px;
        border-radius: 20px;
        margin-top: 15px;
        box-shadow: #cff0ff 0px 10px 10px -5px;
        border-inline: 2px solid transparent;
      }

      .form .input::-moz-placeholder {
        color: rgb(170, 170, 170);
      }

      .form .input::placeholder {
        color: rgb(170, 170, 170);
      }

      .form .input:focus {
        outline: none;
        border-inline: 2px solid #12b1d1;
      }

      .form .forgot-password {
        display: block;
        margin-top: 10px;
        margin-left: 10px;
      }

      .form .forgot-password a {
        font-size: 11px;
        color: #0099ff;
        text-decoration: none;
      }

      .form .login-button {
        display: block;
        width: 100%;
        font-weight: bold;
        background: linear-gradient(
          45deg,
          rgb(16, 137, 211) 0%,
          rgb(18, 177, 209) 100%
        );
        color: white;
        padding-block: 15px;
        margin: 20px auto;
        border-radius: 20px;
        box-shadow: rgba(133, 189, 215, 0.8784313725) 0px 20px 10px -15px;
        border: none;
        transition: all 0.2s ease-in-out;
      }

      .form .login-button:hover {
        transform: scale(1.03);
        box-shadow: rgba(133, 189, 215, 0.8784313725) 0px 23px 10px -20px;
      }

      .form .login-button:active {
        transform: scale(0.95);
        box-shadow: rgba(133, 189, 215, 0.8784313725) 0px 15px 10px -10px;
      }

      .social-account-container {
        margin-top: 25px;
      }

      .social-account-container .title {
        display: block;
        text-align: center;
        font-size: 10px;
        color: rgb(170, 170, 170);
      }

      .social-account-container .social-accounts {
        width: 100%;
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-top: 5px;
      }

      .social-account-container .social-accounts .social-button {
        background: linear-gradient(
          45deg,
          rgb(0, 0, 0) 0%,
          rgb(112, 112, 112) 100%
        );
        border: 5px solid white;
        padding: 5px;
        border-radius: 50%;
        width: 40px;
        aspect-ratio: 1;
        display: grid;
        place-content: center;
        box-shadow: rgba(133, 189, 215, 0.8784313725) 0px 12px 10px -8px;
        transition: all 0.2s ease-in-out;
      }

      .social-account-container .social-accounts .social-button .svg {
        fill: white;
        margin: auto;
      }

      .social-account-container .social-accounts .social-button:hover {
        transform: scale(1.2);
      }

      .social-account-container .social-accounts .social-button:active {
        transform: scale(0.9);
      }

      .agreement {
        display: block;
        text-align: center;
        margin-top: 15px;
      }

      .agreement a {
        text-decoration: none;
        color: #0099ff;
        font-size: 9px;
      }

      /* ====== NEW PAYMENT MODAL ====== */
      .payment-modal {
        width: fit-content;
        height: fit-content;
        background: #ffffff;
        box-shadow: 0px 187px 75px rgba(0, 0, 0, 0.01),
          0px 105px 63px rgba(0, 0, 0, 0.05), 0px 47px 47px rgba(0, 0, 0, 0.09),
          0px 12px 26px rgba(0, 0, 0, 0.1), 0px 0px 0px rgba(0, 0, 0, 0.1);
        border-radius: 26px;
        max-width: 450px;
      }

      .payment-form {
        display: flex;
        flex-direction: column;
        gap: 20px;
        padding: 20px;
      }

      .payment--options {
        width: calc(100% - 40px);
        display: grid;
        grid-template-columns: 33% 34% 33%;
        gap: 20px;
        padding: 10px;
      }

      .payment--options button {
        height: 55px;
        background: #f2f2f2;
        border-radius: 11px;
        padding: 0;
        border: 0;
        outline: none;
        cursor: pointer;
        transition: all 0.3s;
      }

      .payment--options button:hover {
        background: #e0e0e0;
      }

      .payment--options button svg {
        height: 18px;
      }

      .payment--options button:last-child svg {
        height: 22px;
      }

      .separator {
        width: calc(100% - 20px);
        display: grid;
        grid-template-columns: 1fr 2fr 1fr;
        gap: 10px;
        color: #8b8e98;
        margin: 0 10px;
      }

      .separator > p {
        word-break: keep-all;
        display: block;
        text-align: center;
        font-weight: 600;
        font-size: 11px;
        margin: auto;
      }

      .separator .line {
        display: inline-block;
        width: 100%;
        height: 1px;
        border: 0;
        background-color: #e8e8e8;
        margin: auto;
      }

      .credit-card-info--form {
        display: flex;
        flex-direction: column;
        gap: 15px;
      }

      .input_container {
        width: 100%;
        height: fit-content;
        display: flex;
        flex-direction: column;
        gap: 5px;
      }

      .split {
        display: grid;
        grid-template-columns: 4fr 2fr;
        gap: 15px;
      }

      .split input {
        width: 100%;
      }

      .input_label {
        font-size: 10px;
        color: #8b8e98;
        font-weight: 600;
      }

      .input_field {
        width: auto;
        height: 40px;
        padding: 0 0 0 16px;
        border-radius: 9px;
        outline: none;
        background-color: #f2f2f2;
        border: 1px solid #e5e5e500;
        transition: all 0.3s cubic-bezier(0.15, 0.83, 0.66, 1);
      }

      .input_field:focus {
        border: 1px solid transparent;
        box-shadow: 0px 0px 0px 2px #242424;
        background-color: transparent;
      }

      .purchase--btn {
        height: 55px;
        background: #f2f2f2;
        border-radius: 11px;
        border: 0;
        outline: none;
        color: #ffffff;
        font-size: 13px;
        font-weight: 700;
        background: linear-gradient(
          180deg,
          #363636 0%,
          #1b1b1b 50%,
          #000000 100%
        );
        box-shadow: 0px 0px 0px 0px #ffffff, 0px 0px 0px 0px #000000;
        transition: all 0.3s cubic-bezier(0.15, 0.83, 0.66, 1);
        cursor: pointer;
      }

      .purchase--btn:hover {
        box-shadow: 0px 0px 0px 2px #ffffff, 0px 0px 0px 4px #0000003a;
        background: linear-gradient(
          180deg,
          #f4b400 0%,
          #e6a800 50%,
          #d89c00 100%
        );
        color: #000;
      }

      /* Reset input number styles */
      .input_field::-webkit-outer-spin-button,
      .input_field::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }

      .input_field[type="number"] {
        -moz-appearance: textfield;
        -webkit-appearance: textfield;
        appearance: textfield;
      }

      .order-summary {
        background: #f9f9f9;
        border-radius: 10px;
        padding: 15px;
        margin-bottom: 20px;
      }

      .order-summary h3 {
        margin-bottom: 10px;
        font-size: 16px;
      }

      .order-item {
        display: flex;
        justify-content: space-between;
        margin-bottom: 5px;
        font-size: 14px;
      }

      .order-total {
        display: flex;
        justify-content: space-between;
        margin-top: 10px;
        padding-top: 10px;
        border-top: 1px solid #ddd;
        font-weight: bold;
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        header {
          padding: 15px 20px;
          flex-direction: column;
          gap: 15px;
        }

        nav ul {
          flex-wrap: wrap;
          justify-content: center;
          gap: 15px;
        }

        .hero-content h2 {
          font-size: 32px;
        }

        .hero-content p {
          font-size: 18px;
        }

        .tryon-interface {
          grid-template-columns: 1fr;
        }

        .outfit-canvas {
          grid-template-columns: 1fr;
          height: auto;
        }

        .impact-stats {
          grid-template-columns: 1fr;
        }

        .rewards {
          grid-template-columns: 1fr;
        }
      }

      .reward-tier.active-tier {
        border: 2px solid #f4b400;
        background: linear-gradient(135deg, #fff9e6 0%, #fff3cc 100%);
        transform: scale(1.05);
        box-shadow: 0 5px 15px rgba(244, 180, 0, 0.3);
      }

      .reward-tier.active-tier h4 {
        color: #f4b400;
        font-weight: bold;
      }

      .points-animation {
        animation: pointsPulse 0.5s ease-in-out;
      }

      @keyframes pointsPulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
        100% {
          transform: scale(1);
        }
      }

      .benefits-badge {
        background: #f4b400;
        color: #000;
        padding: 4px 8px;
        border-radius: 12px;
        font-size: 10px;
        font-weight: bold;
        margin-left: 5px;
      }
      /* === PAYMENT CONFIRMATION STYLES === */
      .confirmation-container {
        text-align: center;
        padding: 20px;
      }

      .confirmation-header {
        margin-bottom: 30px;
      }

      .confirmation-icon {
        font-size: 60px;
        margin-bottom: 15px;
      }

      .confirmation-header h2 {
        color: #2ecc71;
        margin-bottom: 10px;
        font-size: 28px;
      }

      .confirmation-subtitle {
        color: #666;
        font-size: 16px;
      }

      .confirmation-details {
        text-align: left;
        margin-bottom: 30px;
      }

      .confirmation-details h3 {
        color: #333;
        margin-bottom: 15px;
        font-size: 18px;
        border-bottom: 2px solid #f4b400;
        padding-bottom: 5px;
      }

      .order-summary-section {
        background: #f9f9f9;
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 20px;
      }

      .rewards-earned {
        background: linear-gradient(135deg, #fff9e6 0%, #fff3cc 100%);
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 20px;
        border-left: 4px solid #f4b400;
      }

      .rewards-info p {
        margin: 8px 0;
        color: #333;
      }

      .shipping-info {
        background: #f0f8ff;
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 20px;
        border-left: 4px solid #4a90e2;
      }

      .shipping-details p {
        margin: 8px 0;
        color: #333;
      }

      .next-steps {
        background: #f0fff0;
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 20px;
        border-left: 4px solid #2ecc71;
      }

      .next-steps ul {
        list-style: none;
        padding: 0;
      }

      .next-steps li {
        margin: 10px 0;
        padding-left: 25px;
        position: relative;
      }

      .next-steps li:before {
        content: "✓";
        position: absolute;
        left: 0;
        color: #2ecc71;
        font-weight: bold;
      }

      .confirmation-actions {
        display: flex;
        gap: 15px;
        justify-content: center;
        margin-bottom: 20px;
        flex-wrap: wrap;
      }

      .continue-shopping-btn {
        background: #000;
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 25px;
        cursor: pointer;
        font-size: 16px;
        transition: all 0.3s;
        flex: 1;
        min-width: 160px;
      }

      .continue-shopping-btn:hover {
        background: #f4b400;
        color: #000;
        transform: translateY(-2px);
      }

      .track-order-btn {
        background: #f4b400;
        color: #000;
        border: none;
        padding: 12px 24px;
        border-radius: 25px;
        cursor: pointer;
        font-size: 16px;
        transition: all 0.3s;
        flex: 1;
        min-width: 160px;
      }

      .track-order-btn:hover {
        background: #000;
        color: #f4b400;
        transform: translateY(-2px);
      }

      .confirmation-footer {
        text-align: center;
        margin-top: 20px;
        padding-top: 20px;
        border-top: 1px solid #eee;
      }

      .confirmation-footer a {
        color: #f4b400;
        text-decoration: none;
        font-weight: bold;
      }

      .confirmation-footer a:hover {
        text-decoration: underline;
      }

      /* Order items in confirmation */
      .confirmation-order-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 0;
        border-bottom: 1px solid #eee;
      }

      .confirmation-order-item:last-child {
        border-bottom: none;
      }

      .order-total {
        display: flex;
        justify-content: space-between;
        margin-top: 15px;
        padding-top: 15px;
        border-top: 2px solid #ddd;
        font-weight: bold;
        font-size: 18px;
      }

      /* Responsive design */
      @media (max-width: 768px) {
        .confirmation-actions {
          flex-direction: column;
        }

        .confirmation-actions button {
          width: 100%;
        }
      }
    </style>
  </head>

  <body>
    <header>
      <h1>ACIDIC</h1>
      <nav>
        <ul>
          <li onclick="showCategory('tshirts')">T-Shirts</li>
          <li onclick="showCategory('sweaters')">Sweaters</li>
          <li onclick="showCategory('hoodies')">Hoodies</li>
          <li onclick="showCategory('pants')">Pants</li>
          <li onclick="showCategory('twopieces')">Two Pieces</li>
          <li onclick="showCategory('accessories')">Accessories</li>
          <li onclick="showAIStylist()">AI Stylist</li>
          <li id="auth-link" onclick="showSignUp()">Sign Up</li>
        </ul>
      </nav>
    </header>

    <!-- HERO SLIDESHOW -->
    <section class="hero" id="main-content">
      <div class="hero-slides">
        <div
          class="hero-slide active"
          style="background-image: url(acidic%2020.jpg)"
        ></div>
        <div
          class="hero-slide"
          style="background-image: url(acidic%207.jpg)"
        ></div>
        <div
          class="hero-slide"
          style="background-image: url(acidic%2028.jpg)"
        ></div>
        <div
          class="hero-slide"
          style="background-image: url(acidic%2012.jpg)"
        ></div>
        <div
          class="hero-slide"
          style="background-image: url(acidic%209.jpg)"
        ></div>
      </div>

      <div class="hero-content">
        <h2 id="glow-text">Elevate Your Streetwear</h2>
        <p id="tracking-text">Modern. Minimal. Bold.</p>
      </div>

      <!-- Slideshow Controls -->
      <button class="slideshow-nav slideshow-prev" onclick="prevSlide()">
        ❮
      </button>
      <button class="slideshow-nav slideshow-next" onclick="nextSlide()">
        ❯
      </button>

      <div class="slideshow-controls">
        <div class="slideshow-dot active" onclick="goToSlide(0)"></div>
        <div class="slideshow-dot" onclick="goToSlide(1)"></div>
        <div class="slideshow-dot" onclick="goToSlide(2)"></div>
        <div class="slideshow-dot" onclick="goToSlide(3)"></div>
        <div class="slideshow-dot" onclick="goToSlide(4)"></div>
      </div>
    </section>

    <!-- AI STYLIST SECTION -->
    <section
      class="ai-stylist-section"
      id="ai-stylist-section"
      style="display: none"
    >
      <div class="stylist-container">
        <h2>AI Personal Stylist</h2>
        <div class="style-quiz">
          <h3>What's Your Style Personality?</h3>
          <div class="quiz-step" id="quiz-step-1">
            <p>How would you describe your style?</p>
            <button onclick="nextQuizStep(1, 'minimalist')">Minimalist</button>
            <button onclick="nextQuizStep(1, 'bold')">Bold & Edgy</button>
            <button onclick="nextQuizStep(1, 'street')">Streetwear</button>
            <button onclick="nextQuizStep(1, 'comfort')">Comfort First</button>
          </div>
          <div class="quiz-step" id="quiz-step-2" style="display: none">
            <p>What colors do you prefer?</p>
            <button onclick="nextQuizStep(2, 'monochrome')">Monochrome</button>
            <button onclick="nextQuizStep(2, 'vibrant')">Vibrant Colors</button>
            <button onclick="nextQuizStep(2, 'earthy')">Earthy Tones</button>
            <button onclick="nextQuizStep(2, 'mixed')">Mixed Palette</button>
          </div>
          <div class="quiz-step" id="quiz-step-3" style="display: none">
            <p>What occasions do you dress for?</p>
            <button onclick="generateRecommendations()">Everyday Wear</button>
            <button onclick="generateRecommendations()">Night Out</button>
            <button onclick="generateRecommendations()">Special Events</button>
            <button onclick="generateRecommendations()">
              All of the Above
            </button>
          </div>
        </div>
        <div class="ai-recommendations" id="ai-recommendations"></div>
      </div>
    </section>

    <!-- VIRTUAL TRY-ON SECTION -->
    <section class="virtual-tryon" id="virtual-tryon" style="display: none">
      <div class="tryon-container">
        <h2>Virtual Try-On</h2>
        <p>Experience our clothing in augmented reality (simulation)</p>
        <div class="tryon-interface">
          <div class="tryon-view">
            <div id="webcam">Camera feed would appear here</div>
            <div id="tryon-canvas">Virtual try-on visualization</div>
          </div>
          <div class="tryon-products">
            <div class="tryon-item" onclick="tryOnProduct('hoodie')">
              <img
                src="https://images.unsplash.com/photo-1556821840-3a63f95609a7?ixlib=rb-4.0.3&auto=format&fit=crop&w=1470&q=80"
                alt="Hoodie"
              />
              <span>Try This Hoodie</span>
            </div>
            <div class="tryon-item" onclick="tryOnProduct('tshirt')">
              <img
                src="https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?ixlib=rb-4.0.3&auto=format&fit=crop&w=1480&q=80"
                alt="T-Shirt"
              />
              <span>Try This T-Shirt</span>
            </div>
            <div class="tryon-item" onclick="tryOnProduct('sweater')">
              <img
                src="https://images.unsplash.com/photo-1434389677669-e08b4cac3105?ixlib=rb-4.0.3&auto=format&fit=crop&w=1452&q=80"
                alt="Sweater"
              />
              <span>Try This Sweater</span>
            </div>
          </div>
        </div>
        <button
          class="add-to-cart"
          style="margin-top: 20px"
          onclick="startWebcam()"
        >
          Start Camera Simulation
        </button>
      </div>
    </section>

    <!-- SUSTAINABILITY SECTION -->
    <section class="sustainability" id="sustainability" style="display: none">
      <div class="impact-container">
        <h2>Our Impact</h2>
        <p>
          At ACIDIC, we're committed to sustainable fashion. Every purchase
          contributes to our environmental initiatives.
        </p>
        <div class="impact-stats">
          <div class="stat">
            <h3 id="water-saved">12,450L</h3>
            <p>Water Saved</p>
          </div>
          <div class="stat">
            <h3 id="co2-saved">2,840kg</h3>
            <p>CO₂ Reduced</p>
          </div>
          <div class="stat">
            <h3 id="items-upcycled">1,250</h3>
            <p>Items Upcycled</p>
          </div>
        </div>
      </div>
    </section>

    <!-- COMMUNITY SECTION -->
    <section class="community" id="community" style="display: none">
      <div class="community-container">
        <h2>ACIDIC Community</h2>
        <div class="user-gallery">
          <h3>#ACIDICStyle</h3>
          <div class="user-photos" id="user-photos">
            <img src="acidic 2.jpg" alt="User style" class="user-photo" />
            <img src="acidic 3.jpg" alt="User style" class="user-photo" />
            <img src="acidic 5.jpg" alt="User style" class="user-photo" />
            <img src="acidic 8.jpg" alt="User style" class="user-photo" />
            <img src="acidic 10.jpg" alt="User style" class="user-photo" />
            <img src="acidic 11.jpg" alt="User style" class="user-photo" />
          </div>
          <button class="add-to-cart" onclick="uploadStyle()">
            Share Your Style
          </button>
        </div>
      </div>
    </section>

    <!-- === ENHANCED LOYALTY PROGRAM SECTION === -->

    <section class="loyalty-program" id="loyalty-program" style="display: none">
      <div class="loyalty-container">
        <h2>ACIDIC Rewards</h2>
        <div class="loyalty-card">
          <div class="points-display">
            <h3 id="user-points">0 Points</h3>
            <div class="progress-bar">
              <div
                class="progress"
                id="points-progress"
                style="width: 0%"
              ></div>
            </div>
            <p id="tier-info">Earn 1 point per R10 spent</p>
            <div
              id="current-benefits"
              style="margin-top: 10px; font-size: 12px"
            ></div>
          </div>
          <div class="rewards">
            <div class="reward-tier" id="bronze-tier">
              <h4>Bronze (100 pts)</h4>
              <p>10% Off Next Purchase</p>
            </div>
            <div class="reward-tier" id="silver-tier">
              <h4>Silver (200 pts)</h4>
              <p>10% Off Next Purchase + Free Delivery</p>
            </div>
            <div class="reward-tier" id="gold-tier">
              <h4>Gold (500 pts)</h4>
              <p>10% Off Next Purchase + Free Delivery + Exclusive Drops</p>
            </div>
          </div>
        </div>

        <!-- Order History -->
        <div
          class="order-history"
          style="
            margin-top: 30px;
            background: white;
            padding: 20px;
            border-radius: 10px;
          "
        >
          <h3>Order History</h3>
          <div
            id="order-history-list"
            style="max-height: 200px; overflow-y: auto"
          >
            <p style="text-align: center; color: #666">No orders yet</p>
          </div>
        </div>
      </div>
    </section>

    <!-- OUTFIT BUILDER SECTION -->
    <section class="outfit-builder" id="outfit-builder" style="display: none">
      <div class="outfit-container">
        <h2>Create Your Look</h2>
        <div class="outfit-canvas">
          <div class="outfit-layers">
            <div class="layer tops" id="top-layer">
              <p>Add a top to start building</p>
            </div>
            <div
              class="layer bottoms"
              id="bottom-layer"
              style="display: none"
            ></div>
            <div
              class="layer accessories"
              id="accessory-layer"
              style="display: none"
            ></div>
          </div>
          <div class="product-selector">
            <div class="category-selector">
              <button onclick="showOutfitCategory('tshirts')">Tops</button>
              <button onclick="showOutfitCategory('pants')">Bottoms</button>
              <button onclick="showOutfitCategory('accessories')">
                Accessories
              </button>
            </div>
            <div class="outfit-products" id="outfit-products"></div>
            <button class="add-outfit-to-cart" onclick="addOutfitToCart()">
              Add Entire Outfit to Cart
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- SIGN UP SECTION -->
    <section class="signup-section" id="signup-section" style="display: none">
      <div class="signup-container">
        <h2 class="signup-heading">Join ACIDIC</h2>
        <p class="signup-subheading">
          Create an account to unlock exclusive offers
        </p>

        <form class="signup-form" onsubmit="event.preventDefault(); signUp();">
          <input
            type="text"
            class="input"
            id="signup-name"
            placeholder="Full Name"
            required
          />
          <input
            type="email"
            class="input"
            id="signup-email"
            placeholder="Email"
            required
          />
          <input
            type="password"
            class="input"
            id="signup-password"
            placeholder="Password"
            required
          />
          <input
            type="password"
            class="input"
            id="signup-confirm-password"
            placeholder="Confirm Password"
            required
          />

          <button type="submit" class="signup-button">Sign Up</button>
        </form>

        <div class="social-account-container">
          <span class="title">Or continue with</span>
          <div class="social-accounts">
            <button type="button" class="social-button">
              <svg
                class="svg"
                xmlns="http://www.w3.org/2000/svg"
                height="1em"
                viewBox="0 0 488 512"
              >
                <path
                  d="M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"
                ></path>
              </svg>
            </button>
            <button type="button" class="social-button">
              <svg
                class="svg"
                xmlns="http://www.w3.org/2000/svg"
                height="1em"
                viewBox="0 0 448 512"
              >
                <path
                  d="M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z"
                ></path>
              </svg>
            </button>
            <button type="button" class="social-button">
              <svg
                class="svg"
                xmlns="http://www.w3.org/2000/svg"
                height="1em"
                viewBox="0 0 448 512"
              >
                <path
                  d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-48.9 158.8c.2 2.8.2 5.7.2 8.5 0 86.7-66 186.6-186.6 186.6-37.2 0-71.7-10.8-100.7-29.4 5.3.6 10.4.8 15.8.8 30.7 0 58.9-10.4 81.4-28-28.8-.6-53-19.5-61.3-45.5 10.1 1.5 19.2 1.5 29.6-1.2-30-6.1-52.5-32.5-52.5-64.4v-.8c8.7 4.9 18.9 7.9 29.6 8.3a65.447 65.447 0 0 1-29.2-54.6c0-12.2 3.2-23.4 8.9-33.1 32.3 39.8 80.8 65.8 135.2 68.6-9.3-44.5 24-80.6 64-80.6 18.9 0 35.9 7.9 47.9 20.7 14.8-2.8 29-8.3 41.6-15.8-4.9 15.2-15.2 28-28.8 36.1 13.2-1.4 26-5.1 37.8-10.2-8.9 13.1-20.1 24.7-32.9 34z"
                ></path>
              </svg>
            </button>
          </div>
        </div>

        <div class="agreement">
          By signing up, you agree to the <a href="#">Terms of Service</a> and
          <a href="#">Privacy Policy</a>
        </div>

        <div class="login-link">
          Already have an account? <a href="#" onclick="showLogin()">Log in</a>
        </div>
      </div>
    </section>

    <!-- LOGIN SECTION -->
    <section class="login-section" id="login-section" style="display: none">
      <div class="container">
        <div class="heading">Sign In</div>
        <form
          action=""
          class="form"
          onsubmit="event.preventDefault(); login();"
        >
          <input
            required=""
            class="input"
            type="email"
            name="email"
            id="login-email"
            placeholder="E-mail"
          />
          <input
            required=""
            class="input"
            type="password"
            name="password"
            id="login-password"
            placeholder="Password"
          />
          <span class="forgot-password"><a href="#">Forgot Password ?</a></span>
          <input class="login-button" type="submit" value="Sign In" />
        </form>
        <div class="social-account-container">
          <span class="title">Or Sign in with</span>
          <div class="social-accounts">
            <button class="social-button google">
              <svg
                class="svg"
                xmlns="http://www.w3.org/2000/svg"
                height="1em"
                viewBox="0 0 488 512"
              >
                <path
                  d="M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"
                ></path>
              </svg>
            </button>
            <button class="social-button apple">
              <svg
                class="svg"
                xmlns="http://www.w3.org/2000/svg"
                height="1em"
                viewBox="0 0 384 512"
              >
                <path
                  d="M318.7 268.7c-.2-36.7 16.4-64.4 50-84.8-18.8-26.9-47.2-41.7-84.7-44.6-35.5-2.8-74.3 20.7-88.5 20.7-15 0-49.4-19.7-76.4-19.7C63.3 141.2 4 184.8 4 273.5q0 39.3 14.4 81.2c12.8 36.7 59 126.7 107.2 125.2 25.2-.6 43-17.9 75.8-17.9 31.8 0 48.3 17.9 76.4 17.9 48.6-.7 90.4-82.5 102.6-119.3-65.2-30.7-61.7-90-61.7-91.9zm-56.6-164.2c27.3-32.4 24.8-61.9 24-72.5-24.1 1.4-52 16.4-67.9 34.9-17.5 19.8-27.8 44.3-25.6 71.9 26.1 2 49.9-11.4 69.5-34.3z"
                ></path>
              </svg>
            </button>
            <button class="social-button twitter">
              <svg
                class="svg"
                xmlns="http://www.w3.org/2000/svg"
                height="1em"
                viewBox="0 0 512 512"
              >
                <path
                  d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"
                ></path>
              </svg>
            </button>
          </div>
        </div>
        <span class="agreement"
          ><a href="#">Learn user licence agreement</a></span
        >
      </div>
    </section>

    <section id="product-section" class="products"></section>

    <!-- CART SIDEBAR -->
    <div id="cart-sidebar" class="cart-sidebar">
      <div class="cart-header">
        <h2>Your Cart</h2>
        <span class="close-cart" onclick="toggleCart(false)">×</span>
      </div>
      <div class="cart-items" id="cart-items"></div>
      <div class="cart-footer">
        <p>Total: <span id="cart-total">R0</span></p>
        <button class="checkout-btn" onclick="checkout()">Checkout</button>
      </div>
    </div>

    <!-- PRODUCT MODAL -->
    <div id="product-modal" class="modal">
      <div class="modal-content">
        <span class="close-modal" onclick="closeModal()">×</span>
        <img
          id="modal-img"
          src=""
          alt=""
          style="
            width: 100%;
            height: 250px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 10px;
          "
        />
        <h3 id="modal-name"></h3>
        <p id="modal-price"></p>
        <label for="size">Select Size:</label>
        <select id="size">
          <option value="Small">Small</option>
          <option value="Medium">Medium</option>
          <option value="Large">Large</option>
          <option value="Extra Large">Extra Large</option>
        </select>
        <button class="add-to-cart" onclick="addSelectedToCart()">
          Add to Cart
        </button>
        <button
          class="add-to-cart"
          onclick="showCustomizeModal()"
          style="background: #f4b400; color: #000; margin-top: 10px"
        >
          Customize This Item
        </button>
      </div>
    </div>

    <!-- CUSTOMIZATION MODAL -->
    <div id="customize-modal" class="modal">
      <div class="modal-content">
        <span class="close-modal" onclick="closeCustomize()">×</span>
        <h3>Customize Your Item</h3>
        <div class="customization-options">
          <div class="color-picker">
            <h4>Choose Color</h4>
            <div class="color-options">
              <div
                class="color-option active"
                style="background: #000"
                onclick="selectColor(this, '#000')"
              ></div>
              <div
                class="color-option"
                style="background: #fff; border: 1px solid #ccc"
                onclick="selectColor(this, '#fff')"
              ></div>
              <div
                class="color-option"
                style="background: #f4b400"
                onclick="selectColor(this, '#f4b400')"
              ></div>
              <div
                class="color-option"
                style="background: #ff0000"
                onclick="selectColor(this, '#ff0000')"
              ></div>
              <div
                class="color-option"
                style="background: #0000ff"
                onclick="selectColor(this, '#0000ff')"
              ></div>
            </div>
          </div>
          <button class="add-to-cart" onclick="addCustomizationToCart()">
            Add Customized Item to Cart
          </button>
        </div>
      </div>
    </div>

    <!-- SIZE RECOMMENDER MODAL -->
    <div id="size-recommender-modal" class="modal">
      <div class="modal-content">
        <span class="close-modal" onclick="closeSizeRecommender()">×</span>
        <h3>Find Your Perfect Fit</h3>
        <div class="size-quiz">
          <div class="quiz-step">
            <label>Height (cm):</label>
            <input type="number" id="user-height" />
          </div>
          <div class="quiz-step">
            <label>Weight (kg):</label>
            <input type="number" id="user-weight" />
          </div>
          <div class="quiz-step">
            <label>Preferred Fit:</label>
            <select id="preferred-fit">
              <option value="slim">Slim</option>
              <option value="regular">Regular</option>
              <option value="oversized">Oversized</option>
            </select>
          </div>
          <button class="add-to-cart" onclick="calculateSize()">
            Find My Size
          </button>
          <div
            id="size-result"
            style="margin-top: 20px; font-weight: bold"
          ></div>
        </div>
      </div>
    </div>

    <!-- CHECKOUT MODAL -->
    <div id="checkout-modal" class="modal">
      <div class="modal-content checkout-form">
        <span class="close-modal" onclick="closeCheckout()">×</span>
        <h3>Checkout Details</h3>
        <p>Delivery Fee: <strong>R150</strong></p>

        <div class="input_container">
          <input
            type="text"
            placeholder="Country/Region"
            id="country"
            required
          />
          <div class="error-message" id="country-error">
            Please enter a valid country
          </div>
        </div>

        <div class="input_container">
          <input type="text" placeholder="First Name" id="fname" required />
          <div class="error-message" id="fname-error">
            Please enter your first name
          </div>
        </div>

        <div class="input_container">
          <input type="text" placeholder="Last Name" id="lname" required />
          <div class="error-message" id="lname-error">
            Please enter your last name
          </div>
        </div>

        <div class="input_container">
          <input type="text" placeholder="Address" id="address" required />
          <div class="error-message" id="address-error">
            Please enter your complete address
          </div>
        </div>

        <div class="input_container">
          <input type="text" placeholder="City" id="city" required />
          <div class="error-message" id="city-error">
            Please enter your city
          </div>
        </div>

        <div class="input_container">
          <input type="text" placeholder="Province" id="province" required />
          <div class="error-message" id="province-error">
            Please enter your province
          </div>
        </div>

        <div class="input_container">
          <input
            type="text"
            placeholder="Postal Code"
            id="postal"
            required
            pattern="[0-9]{4,10}"
          />
          <div class="error-message" id="postal-error">
            Please enter a valid postal code (4-10 digits)
          </div>
        </div>

        <div class="input_container">
          <input
            type="tel"
            placeholder="Phone Number"
            id="phone"
            required
            pattern="[0-9+\-\s]{10,15}"
          />
          <div class="error-message" id="phone-error">
            Please enter a valid phone number (10-15 digits)
          </div>
        </div>

        <div class="input_container">
          <input type="email" placeholder="Email" id="email" required />
          <div class="error-message" id="email-error">
            Please enter a valid email address
          </div>
        </div>

        <label>Payment Method:</label>
        <select id="payment-method">
          <option value="Card">Credit/Debit Card</option>
          <option value="EFT">EFT / Bank Transfer</option>
          <option value="Cash on Delivery">Cash on Delivery</option>
        </select>

        <p style="margin-top: 10px">
          Total (including delivery): <strong id="final-total"></strong>
        </p>

        <button class="confirm-payment" onclick="validateCheckoutForm()">
          Proceed to Payment
        </button>
      </div>
    </div>

    <!-- NEW PAYMENT MODAL -->
    <div id="payment-modal" class="modal">
      <div class="payment-modal">
        <form
          class="payment-form"
          onsubmit="event.preventDefault(); processPayment();"
        >
          <span class="close-modal" onclick="closePayment()">×</span>

          <!-- Order Summary -->
          <div class="order-summary">
            <h3>Order Summary</h3>
            <div id="payment-order-items"></div>
            <div class="order-total">
              <span>Total:</span>
              <span id="payment-total">R0</span>
            </div>
          </div>

          <div class="payment--options">
            <button name="paypal" type="button">
              <svg
                xml:space="preserve"
                viewBox="0 0 124 33"
                height="33px"
                width="124px"
                y="0px"
                x="0px"
                id="Layer_1"
                version="1.1"
                xmlns:xlink="http://www.w3.org/1999/xlink"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M46.211,6.749h-6.839c-0.468,0-0.866,0.34-0.939,0.802l-2.766,17.537c-0.055,0.346,0.213,0.658,0.564,0.658  h3.265c0.468,0,0.866-0.34,0.939-0.803l0.746-4.73c0.072-0.463,0.471-0.803,0.938-0.803h2.165c4.505,0,7.105-2.18,7.784-6.5  c0.306-1.89,0.013-3.375-0.872-4.415C50.224,7.353,48.5,6.749,46.211,6.749z M47,13.154c-0.374,2.454-2.249,2.454-4.062,2.454  h-1.032l0.724-4.583c0.043-0.277,0.283-0.481,0.563-0.481h0.473c1.235,0,2.4,0,3.002,0.704C47.027,11.668,47.137,12.292,47,13.154z"
                  fill="#253B80"
                ></path>
                <path
                  d="M66.654,13.075h-3.275c-0.279,0-0.52,0.204-0.563,0.481l-0.145,0.916l-0.229-0.332  c-0.709-1.029-2.29-1.373-3.868-1.373c-3.619,0-6.71,2.741-7.312,6.586c-0.313,1.918,0.132,3.752,1.22,5.031  c0.998,1.176,2.426,1.666,4.125,1.666c2.916,0,4.533-1.875,4.533-1.875l-0.146,0.91c-0.055,0.348,0.213,0.66,0.562,0.66h2.95  c0.469,0,0.865-0.34,0.939-0.803l1.77-11.209C67.271,13.388,67.004,13.075,66.654,13.075z M62.089,19.449  c-0.316,1.871-1.801,3.127-3.695,3.127c-0.951,0-1.711-0.305-2.199-0.883c-0.484-0.574-0.668-1.391-0.514-2.301  c0.295-1.855,1.805-3.152,3.67-3.152c0.93,0,1.686,0.309,2.184,0.892C62.034,17.721,62.232,18.543,62.089,19.449z"
                  fill="#253B80"
                ></path>
                <path
                  d="M84.096,13.075h-3.291c-0.314,0-0.609,0.156-0.787,0.417l-4.539,6.686l-1.924-6.425  c-0.121-0.402-0.492-0.678-0.912-0.678h-3.234c-0.393,0-0.666,0.384-0.541,0.754l3.625,10.638l-3.408,4.811  c-0.268,0.379,0.002,0.9,0.465,0.9h3.287c0.312,0,0.604-0.152,0.781-0.408L84.564,13.97C84.826,13.592,84.557,13.075,84.096,13.075z"
                  fill="#253B80"
                ></path>
                <path
                  d="M94.992,6.749h-6.84c-0.467,0-0.865,0.34-0.938,0.802l-2.766,17.537c-0.055,0.346,0.213,0.658,0.562,0.658  h3.51c0.326,0,0.605-0.238,0.656-0.562l0.785-4.971c0.072-0.463,0.471-0.803,0.938-0.803h2.164c4.506,0,7.105-2.18,7.785-6.5  c0.307-1.89,0.012-3.375-0.873-4.415C99.004,7.353,97.281,6.749,94.992,6.749z M95.781,13.154c-0.373,2.454-2.248,2.454-4.062,2.454  h-1.031l0.725-4.583c0.043-0.277,0.281-0.481,0.562-0.481h0.473c1.234,0,2.4,0,3.002,0.704  C95.809,11.668,95.918,12.292,95.781,13.154z"
                  fill="#179BD7"
                ></path>
                <path
                  d="M115.434,13.075h-3.273c-0.281,0-0.52,0.204-0.562,0.481l-0.145,0.916l-0.23-0.332  c-0.709-1.029-2.289-1.373-3.867-1.373c-3.619,0-6.709,2.741-7.311,6.586c-0.312,1.918,0.131,3.752,1.219,5.031  c1,1.176,2.426,1.666,4.125,1.666c2.916,0,4.533-1.875,4.533-1.875l-0.146,0.91c-0.055,0.348,0.213,0.66,0.564,0.66h2.949  c0.467,0,0.865-0.34,0.938-0.803l1.771-11.209C116.053,13.388,115.785,13.075,115.434,13.075z M110.869,19.449  c-0.314,1.871-1.801,3.127-3.695,3.127c-0.949,0-1.711-0.305-2.199-0.883c-0.484-0.574-0.666-1.391-0.514-2.301  c0.297-1.855,1.805-3.152,3.67-3.152c0.93,0,1.686,0.309,2.184,0.892C110.816,17.721,111.014,18.543,110.869,19.449z"
                  fill="#179BD7"
                ></path>
                <path
                  d="M119.295,7.23l-2.807,17.858c-0.055,0.346,0.213,0.658,0.562,0.658h2.822c0.469,0,0.867-0.34,0.939-0.803  l2.768-17.536c0.055-0.346-0.213-0.659-0.562-0.659h-3.16C119.578,6.749,119.338,6.953,119.295,7.23z"
                  fill="#179BD7"
                ></path>
                <path
                  d="M7.266,29.154l0.523-3.322l-1.165-0.027H1.061L4.927,1.292C4.939,1.218,4.978,1.149,5.035,1.1  c0.057-0.049,0.13-0.076,0.206-0.076h9.38c3.114,0,5.263,0.648,6.385,1.927c0.526,0.6,0.861,1.227,1.023,1.917  c0.17,0.724,0.173,1.589,0.007,2.644l-0.012,0.077v0.676l0.526,0.298c0.443,0.235,0.795,0.504,1.065,0.812  c0.45,0.513,0.741,1.165,0.864,1.938c0.127,0.795,0.085,1.741-0.123,2.812c-0.24,1.232-0.628,2.305-1.152,3.183  c-0.482,0.809-1.096,1.48-1.825,2c-0.696,0.494-1.523,0.869-2.458,1.109c-0.906,0.236-1.939,0.355-3.072,0.355h-0.73  c-0.522,0-1.029,0.188-1.427,0.525c-0.399,0.344-0.663,0.814-0.744,1.328l-0.055,0.299l-0.924,5.855l-0.042,0.215  c-0.011,0.068-0.03,0.102-0.058,0.125c-0.025,0.021-0.061,0.035-0.096,0.035H7.266z"
                  fill="#253B80"
                ></path>
                <path
                  d="M23.048,7.667L23.048,7.667L23.048,7.667c-0.028,0.179-0.06,0.362-0.096,0.55  c-1.237,6.351-5.469,8.545-10.874,8.545H9.326c-0.661,0-1.218,0.48-1.321,1.132l0,0l0,0L6.596,26.83l-0.399,2.533  c-0.067,0.428,0.263,0.814,0.695,0.814h4.881c0.578,0,1.069-0.42,1.16-0.99l0.048-0.248l0.919-5.832l0.059-0.32  c0.09-0.572,0.582-0.992,1.16-0.992h0.73c4.729,0,8.431-1.92,9.513-7.476c0.452-2.321,0.218-4.259-0.978-5.622  C24.022,8.286,23.573,7.945,23.048,7.667z"
                  fill="#179BD7"
                ></path>
                <path
                  d="M21.754,7.151c-0.189-0.055-0.384-0.105-0.584-0.15c-0.201-0.044-0.407-0.083-0.619-0.117  c-0.742-0.12-1.555-0.177-2.426-0.177h-7.352c-0.181,0-0.353,0.041-0.507,0.115C9.927,6.985,9.675,7.306,9.614,7.699L8.05,17.605  l-0.045,0.289c0.103-0.652,0.66-1.132,1.321-1.132h2.752c5.405,0,9.637-2.195,10.874-8.545c0.037-0.188,0.068-0.371,0.096-0.55  c-0.313-0.166-0.652-0.308-1.017-0.429C21.941,7.208,21.848,7.179,21.754,7.151z"
                  fill="#222D65"
                ></path>
                <path
                  d="M9.614,7.699c0.061-0.393,0.313-0.714,0.652-0.876c0.155-0.074,0.326-0.115,0.507-0.115h7.352  c0.871,0,1.684,0.057,2.426,0.177c0.212,0.034,0.418,0.073,0.619,0.117c0.2,0.045,0.395,0.095,0.584,0.15  c0.094,0.028,0.187,0.057,0.278,0.086c0.365,0.121,0.704,0.264,1.017,0.429c0.368-2.347-0.003-3.945-1.272-5.392  C20.378,0.682,17.853,0,14.622,0h-9.38c-0.66,0-1.223,0.48-1.325,1.133L0.01,25.898c-0.077,0.49,0.301,0.932,0.795,0.932h5.791  l1.454-9.225L9.614,7.699z"
                  fill="#253B80"
                ></path>
              </svg>
            </button>
            <button name="apple-pay" type="button">
              <svg
                xml:space="preserve"
                viewBox="0 0 512 210.2"
                y="0px"
                x="0px"
                id="Layer_1"
                version="1.1"
                xmlns:xlink="http://www.w3.org/1999/xlink"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M93.6,27.1C87.6,34.2,78,39.8,68.4,39c-1.2-9.6,3.5-19.8,9-26.1c6-7.3,16.5-12.5,25-12.9  C103.4,10,99.5,19.8,93.6,27.1 M102.3,40.9c-13.9-0.8-25.8,7.9-32.4,7.9c-6.7,0-16.8-7.5-27.8-7.3c-14.3,0.2-27.6,8.3-34.9,21.2  c-15,25.8-3.9,64,10.6,85c7.1,10.4,15.6,21.8,26.8,21.4c10.6-0.4,14.8-6.9,27.6-6.9c12.9,0,16.6,6.9,27.8,6.7  c11.6-0.2,18.9-10.4,26-20.8c8.1-11.8,11.4-23.3,11.6-23.9c-0.2-0.2-22.4-8.7-22.6-34.3c-0.2-21.4,17.5-31.6,18.3-32.2  C123.3,42.9,107.7,41.3,102.3,40.9 M182.6,11.9v155.9h24.2v-53.3h33.5c30.6,0,52.1-21,52.1-51.4c0-30.4-21.1-51.2-51.3-51.2H182.6z   M206.8,32.3h27.9c21,0,33,11.2,33,30.9c0,19.7-12,31-33.1,31h-27.8V32.3z M336.6,169c15.2,0,29.3-7.7,35.7-19.9h0.5v18.7h22.4V90.2  c0-22.5-18-37-45.7-37c-25.7,0-44.7,14.7-45.4,34.9h21.8c1.8-9.6,10.7-15.9,22.9-15.9c14.8,0,23.1,6.9,23.1,19.6v8.6l-30.2,1.8  c-28.1,1.7-43.3,13.2-43.3,33.2C298.4,155.6,314.1,169,336.6,169z M343.1,150.5c-12.9,0-21.1-6.2-21.1-15.7c0-9.8,7.9-15.5,23-16.4  l26.9-1.7v8.8C371.9,140.1,359.5,150.5,343.1,150.5z M425.1,210.2c23.6,0,34.7-9,44.4-36.3L512,54.7h-24.6l-28.5,92.1h-0.5  l-28.5-92.1h-25.3l41,113.5l-2.2,6.9c-3.7,11.7-9.7,16.2-20.4,16.2c-1.9,0-5.6-0.2-7.1-0.4v18.7C417.3,210,423.3,210.2,425.1,210.2z"
                  id="XMLID_34_"
                ></path>
              </svg>
            </button>
            <button name="google-pay" type="button">
              <svg
                fill="none"
                viewBox="0 0 80 39"
                height="39"
                width="80"
                xmlns="http://www.w3.org/2000/svg"
              >
                <g clip-path="url(#clip0_134_34)">
                  <path
                    fill="#5F6368"
                    d="M37.8 19.7V29H34.8V6H42.6C44.5 6 46.3001 6.7 47.7001 8C49.1001 9.2 49.8 11 49.8 12.9C49.8 14.8 49.1001 16.5 47.7001 17.8C46.3001 19.1 44.6 19.8 42.6 19.8L37.8 19.7ZM37.8 8.8V16.8H42.8C43.9 16.8 45.0001 16.4 45.7001 15.6C47.3001 14.1 47.3 11.6 45.8 10.1L45.7001 10C44.9001 9.2 43.9 8.7 42.8 8.8H37.8Z"
                  ></path>
                  <path
                    fill="#5F6368"
                    d="M56.7001 12.8C58.9001 12.8 60.6001 13.4 61.9001 14.6C63.2001 15.8 63.8 17.4 63.8 19.4V29H61V26.8H60.9001C59.7001 28.6 58 29.5 56 29.5C54.3 29.5 52.8 29 51.6 28C50.5 27 49.8 25.6 49.8 24.1C49.8 22.5 50.4 21.2 51.6 20.2C52.8 19.2 54.5 18.8 56.5 18.8C58.3 18.8 59.7 19.1 60.8 19.8V19.1C60.8 18.1 60.4 17.1 59.6 16.5C58.8 15.8 57.8001 15.4 56.7001 15.4C55.0001 15.4 53.7 16.1 52.8 17.5L50.2001 15.9C51.8001 13.8 53.9001 12.8 56.7001 12.8ZM52.9001 24.2C52.9001 25 53.3001 25.7 53.9001 26.1C54.6001 26.6 55.4001 26.9 56.2001 26.9C57.4001 26.9 58.6 26.4 59.5 25.5C60.5 24.6 61 23.5 61 22.3C60.1 21.6 58.8 21.2 57.1 21.2C55.9 21.2 54.9 21.5 54.1 22.1C53.3 22.6 52.9001 23.3 52.9001 24.2Z"
                  ></path>
                  <path
                    fill="#5F6368"
                    d="M80 13.3L70.1 36H67.1L70.8 28.1L64.3 13.4H67.5L72.2 24.7H72.3L76.9 13.4H80V13.3Z"
                  ></path>
                  <path
                    fill="#4285F4"
                    d="M25.9 17.7C25.9 16.8 25.8 15.9 25.7 15H13.2V20.1H20.3C20 21.7 19.1 23.2 17.7 24.1V27.4H22C24.5 25.1 25.9 21.7 25.9 17.7Z"
                  ></path>
                  <path
                    fill="#34A853"
                    d="M13.1999 30.5999C16.7999 30.5999 19.7999 29.3999 21.9999 27.3999L17.6999 24.0999C16.4999 24.8999 14.9999 25.3999 13.1999 25.3999C9.7999 25.3999 6.7999 23.0999 5.7999 19.8999H1.3999V23.2999C3.6999 27.7999 8.1999 30.5999 13.1999 30.5999Z"
                  ></path>
                  <path
                    fill="#FBBC04"
                    d="M5.8001 19.8999C5.2001 18.2999 5.2001 16.4999 5.8001 14.7999V11.3999H1.4001C-0.499902 15.0999 -0.499902 19.4999 1.4001 23.2999L5.8001 19.8999Z"
                  ></path>
                  <path
                    fill="#EA4335"
                    d="M13.2 9.39996C15.1 9.39996 16.9 10.1 18.3 11.4L22.1 7.59996C19.7 5.39996 16.5 4.09996 13.3 4.19996C8.3 4.19996 3.7 6.99996 1.5 11.5L5.9 14.9C6.8 11.7 9.8 9.39996 13.2 9.39996Z"
                  ></path>
                </g>
                <defs>
                  <clipPath id="clip0_134_34">
                    <rect fill="white" height="38.1" width="80"></rect>
                  </clipPath>
                </defs>
              </svg>
            </button>
          </div>
          <div class="separator">
            <hr class="line" />
            <p>or pay using credit card</p>
            <hr class="line" />
          </div>
          <div class="credit-card-info--form">
            <div class="input_container">
              <label for="cardholder_name" class="input_label"
                >Card holder full name</label
              >
              <input
                id="cardholder_name"
                class="input_field"
                type="text"
                name="input-name"
                title="Input title"
                placeholder="Enter your full name"
                required
              />
            </div>
            <div class="input_container">
              <label for="card_number" class="input_label">Card Number</label>
              <input
                id="card_number"
                class="input_field"
                type="number"
                name="input-name"
                title="Input title"
                placeholder="0000 0000 0000 0000"
                required
              />
            </div>
            <div class="input_container">
              <label for="expiry_date" class="input_label"
                >Expiry Date / CVV</label
              >
              <div class="split">
                <input
                  id="expiry_date"
                  class="input_field"
                  type="text"
                  name="input-name"
                  title="Expiry Date"
                  placeholder="01/23"
                  required
                />
                <input
                  id="cvv"
                  class="input_field"
                  type="number"
                  name="cvv"
                  title="CVV"
                  placeholder="CVV"
                  required
                />
              </div>
            </div>
          </div>
          <button class="purchase--btn" type="submit">
            Pay <span id="payment-amount">R0</span>
          </button>
        </form>
      </div>
    </div>
    <!-- === PAYMENT CONFIRMATION MODAL === -->

    <div id="confirmation-modal" class="modal">
      <div class="modal-content" style="max-width: 500px">
        <div class="confirmation-container">
          <div class="confirmation-header">
            <div class="confirmation-icon">✅</div>
            <h2>Order Confirmed!</h2>
            <p class="confirmation-subtitle">Thank you for your purchase</p>
          </div>

          <div class="confirmation-details">
            <div class="order-summary-section">
              <h3>Order Summary</h3>
              <div id="confirmation-order-items"></div>
              <div class="order-total">
                <span>Total Paid:</span>
                <span id="confirmation-total">R0</span>
              </div>
            </div>

            <div
              class="rewards-earned"
              id="rewards-earned-section"
              style="display: none"
            >
              <h3>🎊 Rewards Earned</h3>
              <div class="rewards-info">
                <p>You earned <strong id="points-earned">0</strong> points!</p>
                <p>Total points: <strong id="total-points">0</strong></p>
                <p class="tier-info" id="tier-progress"></p>
              </div>
            </div>

            <div class="shipping-info">
              <h3>Shipping Information</h3>
              <div class="shipping-details">
                <p><strong>Estimated Delivery:</strong> 3-5 business days</p>
                <p>
                  <strong>Tracking Number:</strong>
                  <span id="tracking-number"
                    >ACD-${Date.now().toString().slice(-8)}</span
                  >
                </p>
                <p>
                  <strong>Shipping Address:</strong>
                  <span id="confirmation-address"></span>
                </p>
              </div>
            </div>

            <div class="next-steps">
              <h3>What's Next?</h3>
              <ul>
                <li>📧 You'll receive an email confirmation shortly</li>
                <li>📦 We'll notify you when your order ships</li>
                <li>
                  🔄 You can track your order using the tracking number above
                </li>
              </ul>
            </div>
          </div>

          <div class="confirmation-actions">
            <button class="continue-shopping-btn" onclick="closeConfirmation()">
              Continue Shopping
            </button>
            <button class="track-order-btn" onclick="trackOrder()">
              Track Your Order
            </button>
          </div>
          <p><strong>Order Number:</strong> <span id="order-number"></span></p>

          <div class="confirmation-footer">
            <p>
              Need help?
              <a href="#" onclick="contactSupport()">Contact Support</a>
            </p>
          </div>
        </div>
      </div>
    </div>

    <footer>
      <p>© 2025 ACIDIC Clothing. All Rights Reserved.</p>
      <p style="margin-top: 10px">
        <a href="#" onclick="showAIStylist()">AI Stylist</a> |
        <a href="#" onclick="showVirtualTryOn()">Virtual Try-On</a> |
        <a href="#" onclick="showSustainability()">Sustainability</a> |
        <a href="#" onclick="showCommunity()">Community</a> |
        <a href="#" onclick="showLoyaltyProgram()">Rewards</a> |
        <a href="#" onclick="showOutfitBuilder()">Outfit Builder</a> |
        <a href="#" onclick="showSizeRecommender()">Size Finder</a>
      </p>
    </footer>

    <script>
      // === PRODUCT DATA WITH REAL IMAGES ===
      const products = {
        tshirts: [
          {
            name: "Infinite",
            price: 250,
            img: "acidic 3.jpg",
          },
          {
            name: "Infinite II",
            price: 350,
            img: "acidic 33.jpg",
          },
          {
            name: "Acidic Effect",
            price: 350,
            img: "acidic 4.jpg",
          },
          {
            name: "Lightning",
            price: 300,
            img: "acidic 19.jpg",
          },
          {
            name: "Naruto",
            price: 400,
            img: "acidic 14.jpg",
          },
          {
            name: "Hand Signature",
            price: 300,
            img: "acidic 16.jpg",
          },
          {
            name: "Hand Signature II",
            price: 300,
            img: "acidic 15.jpg",
          },
          {
            name: "Feather rainbow",
            price: 300,
            img: "acidic 26.jpg",
          },
          {
            name: "Angelic",
            price: 300,
            img: "acidic 1.jpg",
          },
          {
            name: "Rainbow",
            price: 350,
            img: "acidic 6.jpg",
          },
          {
            name: "Butterfly effect",
            price: 300,
            img: "acidic 9.jpg",
          },
        ],
        sweaters: [
          {
            name: "Infinite",
            price: 350,
            img: "acidic 2.jpg",
          },
          {
            name: "Infinite II",
            price: 400,
            img: "acidic 7.jpg",
          },
          {
            name: "Acidic Effect",
            price: 450,
            img: "acidic m.jpg",
          },
          {
            name: "Angelic",
            price: 400,
            img: "acidic 1.jpg",
          },
          {
            name: "Rainbow",
            price: 400,
            img: "acidic 34.jpg",
          },
          {
            name: "Butterfly effect",
            price: 400,
            img: "acidic.jpg",
          },
        ],
        hoodies: [
          {
            name: "Infinite II",
            price: 500,
            img: "acidic 8.jpg",
          },
          {
            name: "Feather rainbow",
            price: 450,
            img: "acidic 5.jpg",
          },
          {
            name: "Hand Signature",
            price: 450,
            img: "acidic 24.jpg",
          },
          {
            name: "Hand Signature II",
            price: 450,
            img: "acidic 23.jpg",
          },
          {
            name: "Naruto",
            price: 550,
            img: "acidic 22.jpg",
          },
          {
            name: "Angelic",
            price: 450,
            img: "acidic 25.jpg",
          },
          {
            name: "Rainbow",
            price: 450,
            img: "acidic 27.jpg",
          },
          {
            name: "Lightning",
            price: 450,
            img: "acidic 21.jpg",
          },
          {
            name: "Infinite",
            price: 400,
            img: "acidic 32.jpg",
          },
        ],
        pants: [
          {
            name: "Slim Fit Cargo",
            price: 499,
            img: "acidic 12.jpg",
          },
          {
            name: "Street Joggers",
            price: 459,
            img: "acidic 13.jpg",
          },
        ],
        twopieces: [
          {
            name: "Ladies Set",
            price: 500,
            img: "acidic 28.jpg",
          },
          {
            name: "Infinite Set",
            price: 500,
            img: "acidic 29.jpg",
          },
        ],
        accessories: [
          {
            name: "Infinite Cap",
            price: 300,
            img: "acidic 31.jpg",
          },
          {
            name: "Rainbow Cap",
            price: 250,
            img: "acidic 30.jpg",
          },
        ],
      };

      // === IMAGE ERROR HANDLING ===
      function handleImageError(img) {
        console.log("Image failed to load:", img.src);
        img.src = "acidic 1.jpg";
        img.alt = "ACIDIC Clothing";
      }

      // Enhanced product display with error handling
      function showCategory(category) {
        hideAllSections();
        const section = document.getElementById("product-section");
        const mainContent = document.getElementById("main-content");
        section.style.display = "grid";
        mainContent.style.display = "block";
        section.classList.remove("active");
        section.innerHTML = "";

        if (products[category]) {
          setTimeout(() => {
            products[category].forEach((item) => {
              const div = document.createElement("div");
              div.classList.add("product");
              div.innerHTML = `
                <img src="${item.img}" alt="${item.name}" onerror="handleImageError(this)">
                <div class="product-info">
                  <h3>${item.name}</h3>
                  <p>R${item.price}</p>
                </div>`;
              div.onclick = () => openModal(item);
              section.appendChild(div);
            });
            requestAnimationFrame(() => section.classList.add("active"));
          }, 150);
        }
      }

      // === PAYMENT CONFIRMATION FUNCTIONS ===

      // Show confirmation modal after successful payment
      function showConfirmation(orderTotal, pointsEarned, address) {
        // Populate order items
        const confirmationItems = document.getElementById(
          "confirmation-order-items"
        );
        confirmationItems.innerHTML = "";

        cart.forEach((item) => {
          const itemDiv = document.createElement("div");
          itemDiv.className = "confirmation-order-item";
          itemDiv.innerHTML = `
            <div>
                <strong>${item.name}</strong>
                <div style="font-size: 12px; color: #666;">Size: ${
                  item.size
                } × ${item.qty}</div>
            </div>
            <div>R${item.price * item.qty}</div>
        `;
          confirmationItems.appendChild(itemDiv);
        });

        // Add delivery fee if applicable
        if (DELIVERY_FEE > 0 && !currentUser?.benefits?.freeDelivery) {
          const deliveryDiv = document.createElement("div");
          deliveryDiv.className = "confirmation-order-item";
          deliveryDiv.innerHTML = `
            <div>Delivery Fee</div>
            <div>R${DELIVERY_FEE}</div>
        `;
          confirmationItems.appendChild(deliveryDiv);
        }

        // Set totals and details
        document.getElementById(
          "confirmation-total"
        ).textContent = `R${orderTotal}`;
        document.getElementById("confirmation-address").textContent = address;

        // Show rewards if earned
        if (pointsEarned > 0 && currentUser) {
          document.getElementById("rewards-earned-section").style.display =
            "block";
          document.getElementById("points-earned").textContent = pointsEarned;
          document.getElementById("total-points").textContent =
            currentUser.points;

          // Show tier progress
          const nextTier =
            currentUser.rewardTier === "Bronze"
              ? "Silver"
              : currentUser.rewardTier === "Silver"
              ? "Gold"
              : null;

          if (nextTier) {
            const nextThreshold = rewardTiers[nextTier].threshold;
            const pointsNeeded = nextThreshold - currentUser.points;
            document.getElementById(
              "tier-progress"
            ).textContent = `${pointsNeeded} points to reach ${nextTier} Tier`;
          } else {
            document.getElementById("tier-progress").textContent =
              "You've reached the highest tier!";
          }
        } else {
          document.getElementById("rewards-earned-section").style.display =
            "none";
        }

        // Show confirmation modal
        closePayment();
        document.getElementById("confirmation-modal").classList.add("active");

        // Generate order confirmation email (simulated)
        generateOrderConfirmationEmail(orderTotal);
      }

      // Close confirmation modal
      function closeConfirmation() {
        document
          .getElementById("confirmation-modal")
          .classList.remove("active");
        // Clear cart and return to shopping
        cart.length = 0;
        updateCart();
        showMainContent();
      }

      // Track order function
      function trackOrder() {
        const trackingNumber =
          document.getElementById("tracking-number").textContent;
        alert(
          `Tracking your order: ${trackingNumber}\n\nYour order is being processed and will ship within 24 hours. You'll receive an email with tracking updates.`
        );

        // In a real implementation, this would redirect to a tracking page
        // window.open(`/track-order/${trackingNumber}`, '_blank');
      }

      // Contact support function
      function contactSupport() {
        alert(
          "Contact our support team:\n📧 support@acidic.com\n📞 0665-ACIDIC (066-532-8795)\n\nWe're here to help with any questions about your order!"
        );
      }

      // Generate order confirmation email (simulated)
      function generateOrderConfirmationEmail(orderTotal) {
        if (!currentUser) return;

        const orderDetails = {
          orderNumber: `CAT-YYMMDD-XXX`,
          customer: currentUser.name,
          email: currentUser.email,
          total: orderTotal,
          items: cart.map((item) => ({
            name: item.name,
            size: item.size,
            quantity: item.qty,
            price: item.price,
          })),
          timestamp: new Date().toLocaleString(),
        };

        // In a real implementation, this would send an actual email
        console.log("Order confirmation email generated:", orderDetails);

        // Simulate email sending
        setTimeout(() => {
          if (Math.random() > 0.1) {
            // 90% success rate for demo
            console.log(
              "📧 Order confirmation email sent to:",
              currentUser.email
            );
          } else {
            console.log("⚠️ Email service temporarily unavailable");
          }
        }, 2000);
      }

      // Enhanced processPayment function with confirmation
      function processPayment() {
        // Validate payment form
        const cardholderName = document.getElementById("cardholder_name").value;
        const cardNumber = document.getElementById("card_number").value;
        const expiryDate = document.getElementById("expiry_date").value;
        const cvv = document.getElementById("cvv").value;

        if (!cardholderName || !cardNumber || !expiryDate || !cvv) {
          alert("Please fill out all payment details.");
          return;
        }
        function processPayment() {
          const result = updateUserRewards(currentPaymentTotal);
          const orderNumber = result?.orderNumber || generateOrderNumber();

          // Show confirmation screen
          document.getElementById("payment-modal").classList.remove("active");
          document.getElementById("confirmation-modal").classList.add("active");

          // Display order number
          document.getElementById("order-number").textContent = orderNumber;

          // Reset cart
          cart.length = 0;
          updateCart();

          alert(
            `✅ Order placed successfully!\nYour Order Number: ${orderNumber}`
          );
        }

        // Validate card number length
        if (cardNumber.length < 16) {
          alert("Please enter a valid 16-digit card number.");
          return;
        }

        // Validate CVV length
        if (cvv.length < 3) {
          alert("Please enter a valid CVV (3 digits).");
          return;
        }

        // Calculate order total with rewards benefits
        const subtotal = cart.reduce((sum, i) => sum + i.price * i.qty, 0);
        const orderTotal = applyRewardsBenefits(subtotal + DELIVERY_FEE);

        // Get shipping address for confirmation
        const address = getShippingAddress();

        // Process payment (simulated)
        showProcessingAnimation();

        // Simulate payment processing delay
        setTimeout(() => {
          // Update user rewards
          const pointsEarned = updateUserRewards(subtotal);

          // Show confirmation modal
          showConfirmation(orderTotal, pointsEarned, address);

          // Reset payment form
          document.getElementById("cardholder_name").value = "";
          document.getElementById("card_number").value = "";
          document.getElementById("expiry_date").value = "";
          document.getElementById("cvv").value = "";

          // Update rewards display
          displayUserRewards();
        }, 2000); // 2 second processing delay
      }

      // Get formatted shipping address
      function getShippingAddress() {
        const address = document.getElementById("address").value;
        const city = document.getElementById("city").value;
        const province = document.getElementById("province").value;
        const postal = document.getElementById("postal").value;

        return `${address}, ${city}, ${province} ${postal}`;
      }

      // Show processing animation
      function showProcessingAnimation() {
        // In a real implementation, you'd show a loading spinner
        // For now, we'll just disable the payment button
        const payButton = document.querySelector(".purchase--btn");
        const originalText = payButton.innerHTML;

        payButton.innerHTML = "Processing...";
        payButton.disabled = true;

        // Re-enable after processing (in case of error)
        setTimeout(() => {
          payButton.innerHTML = originalText;
          payButton.disabled = false;
        }, 3000);
      }

      // === ORDER HISTORY DISPLAY ===
      function displayOrderHistory() {
        if (!currentUser) return;

        const orderHistoryList = document.getElementById("order-history-list");
        if (!orderHistoryList) return;

        if (currentUser.orders && currentUser.orders.length > 0) {
          orderHistoryList.innerHTML = "";

          // Show last 5 orders
          const recentOrders = currentUser.orders.slice(-5).reverse();

          recentOrders.forEach((order) => {
            const orderDate = new Date(order.date).toLocaleDateString();
            const orderElement = document.createElement("div");
            orderElement.className = "order-item";
            orderElement.style.cssText =
              "display: flex; justify-content: space-between; padding: 10px; border-bottom: 1px solid #eee;";
            orderElement.innerHTML = `
                <div>
                    <strong>Order #${order.id.toString().slice(-6)}</strong>
                    <div style="font-size: 12px; color: #666;">${orderDate}</div>
                </div>
                <div style="text-align: right;">
                    <div style="font-size: 12px; color: #999;">${
                      order.orderNumber || "N/A"
                    }</div>
<div>R${order.total}</div>
                    <div style="font-size: 12px; color: #f4b400;">+${
                      order.pointsEarned
                    } pts</div>
                </div>
            `;
            orderHistoryList.appendChild(orderElement);
          });
        } else {
          orderHistoryList.innerHTML =
            '<p style="text-align: center; color: #666;">No orders yet</p>';
        }
      }

      // === ENHANCED USER REWARDS SYSTEM ===
      // Enhanced user structure with rewards tracking
      const createUserWithRewards = (userData) => {
        return {
          ...userData,
          points: 0,
          totalSpent: 0,
          orders: [],
          rewardTier: "Bronze",
          benefits: {
            discount: 0,
            freeDelivery: false,
            exclusiveAccess: false,
          },
        };
      };

      // Reward tiers configuration
      const rewardTiers = {
        Bronze: {
          threshold: 100,
          discount: 0.1,
          freeDelivery: false,
          exclusiveAccess: false,
        },
        Silver: {
          threshold: 200,
          discount: 0.1,
          freeDelivery: true,
          exclusiveAccess: false,
        },
        Gold: {
          threshold: 500,
          discount: 0.1,
          freeDelivery: true,
          exclusiveAccess: true,
        },
      };
      // === ORDER NUMBER GENERATOR ===
      function generateOrderNumber() {
        const prefix = "ACD"; // your brand prefix
        const date = new Date();
        const yyyy = date.getFullYear().toString().slice(-2);
        const mm = (date.getMonth() + 1).toString().padStart(2, "0");
        const dd = date.getDate().toString().padStart(2, "0");
        const rand = Math.floor(1000 + Math.random() * 9000); // random 4 digits
        return `${prefix}${yyyy}${mm}${dd}-${rand}`;
      }

      // Update user rewards after purchase
      function updateUserRewards(orderTotal) {
        if (!currentUser) return;

        // Calculate points earned (1 point per R10 spent)
        const pointsEarned = Math.floor(orderTotal / 10);

        // Update user data
        currentUser.points += pointsEarned;
        currentUser.totalSpent += orderTotal;

        const orderNumber = generateOrderNumber();
        currentUser.orders.push({
          id: Date.now(),
          orderNumber: orderNumber,
          date: new Date().toISOString(),
          total: orderTotal,
          pointsEarned: pointsEarned,
          items: [...cart],
        });

        return { pointsEarned, orderNumber };

        // Check and update reward tier
        updateRewardTier();

        // Save updated user data
        const users = JSON.parse(localStorage.getItem("acidicUsers")) || [];
        const userIndex = users.findIndex((u) => u.id === currentUser.id);
        if (userIndex !== -1) {
          users[userIndex] = currentUser;
          localStorage.setItem("acidicUsers", JSON.stringify(users));
          localStorage.setItem("currentUser", JSON.stringify(currentUser));
        }

        return pointsEarned;
      }

      // Update user's reward tier based on points
      function updateRewardTier() {
        if (!currentUser) return;

        let newTier = "Bronze";

        if (currentUser.points >= rewardTiers.Gold.threshold) {
          newTier = "Gold";
        } else if (currentUser.points >= rewardTiers.Silver.threshold) {
          newTier = "Silver";
        }

        if (currentUser.rewardTier !== newTier) {
          currentUser.rewardTier = newTier;
          currentUser.benefits = { ...rewardTiers[newTier] };

          // Show tier upgrade notification
          if (newTier !== "Bronze") {
            showTierUpgradeNotification(newTier);
          }
        }
      }

      // Show tier upgrade notification
      function showTierUpgradeNotification(newTier) {
        const benefits = rewardTiers[newTier];
        let benefitsText = `🎉 Congratulations! You've reached ${newTier} Tier! Benefits:`;

        if (benefits.discount > 0) {
          benefitsText += `\n• ${
            benefits.discount * 100
          }% discount on all purchases`;
        }
        if (benefits.freeDelivery) {
          benefitsText += `\n• Free delivery on all orders`;
        }
        if (benefits.exclusiveAccess) {
          benefitsText += `\n• Exclusive access to limited edition drops`;
        }

        alert(benefitsText);
      }

      // Apply rewards benefits to order
      function applyRewardsBenefits(orderTotal) {
        if (!currentUser) return orderTotal;

        const benefits = currentUser.benefits;
        let finalTotal = orderTotal;

        // Apply discount
        if (benefits.discount > 0) {
          const discountAmount = orderTotal * benefits.discount;
          finalTotal -= discountAmount;
        }

        // Apply free delivery
        if (benefits.freeDelivery && DELIVERY_FEE > 0) {
          finalTotal -= DELIVERY_FEE;
        }

        return Math.max(0, finalTotal); // Ensure total doesn't go negative
      }

      // === ENHANCED LOYALTY DISPLAY ===
      function displayUserRewards() {
        if (!currentUser) return;

        const pointsDisplay = document.getElementById("user-points");
        const progressBar = document.getElementById("points-progress");
        const tierInfo = document.getElementById("tier-info");
        const benefitsDisplay = document.getElementById("current-benefits");

        if (pointsDisplay) {
          pointsDisplay.textContent = `${currentUser.points} Points`;
          pointsDisplay.classList.add("points-animation");
          setTimeout(
            () => pointsDisplay.classList.remove("points-animation"),
            500
          );
        }

        if (progressBar && tierInfo) {
          const nextTier =
            currentUser.rewardTier === "Bronze"
              ? "Silver"
              : currentUser.rewardTier === "Silver"
              ? "Gold"
              : null;

          if (nextTier) {
            const nextThreshold = rewardTiers[nextTier].threshold;
            const progressPercentage = Math.min(
              (currentUser.points / nextThreshold) * 100,
              100
            );
            progressBar.style.width = `${progressPercentage}%`;
            tierInfo.textContent = `${
              nextThreshold - currentUser.points
            } points to ${nextTier} Tier`;
          } else {
            progressBar.style.width = "100%";
            tierInfo.textContent = "Maximum tier reached!";
          }
        }

        if (benefitsDisplay) {
          const benefits = currentUser.benefits;
          let benefitsHTML = "";

          if (benefits.discount > 0) {
            benefitsHTML += `<span class="benefits-badge">${
              benefits.discount * 100
            }% OFF</span>`;
          }
          if (benefits.freeDelivery) {
            benefitsHTML += `<span class="benefits-badge">FREE DELIVERY</span>`;
          }
          if (benefits.exclusiveAccess) {
            benefitsHTML += `<span class="benefits-badge">EXCLUSIVE</span>`;
          }

          benefitsDisplay.innerHTML = benefitsHTML || "No active benefits";
        }

        // Update tier display
        const tiers = ["bronze", "silver", "gold"];
        tiers.forEach((tier) => {
          const tierElement = document.getElementById(`${tier}-tier`);
          if (tierElement) {
            tierElement.classList.remove("active-tier");
            if (tier.toLowerCase() === currentUser.rewardTier.toLowerCase()) {
              tierElement.classList.add("active-tier");
            }
          }
        });

        // Display order history
        displayOrderHistory();
      }

      // === USER AUTHENTICATION ===
      let users = JSON.parse(localStorage.getItem("acidicUsers")) || [];
      let currentUser = JSON.parse(localStorage.getItem("currentUser")) || null;

      // Update auth link based on login status
      function updateAuthLink() {
        const authLink = document.getElementById("auth-link");
        if (currentUser) {
          authLink.textContent = "Logout";
          authLink.onclick = logout;
        } else {
          authLink.textContent = "Sign Up";
          authLink.onclick = showSignUp;
        }
      }

      // Sign up function
      function signUp() {
        const name = document.getElementById("signup-name").value;
        const email = document.getElementById("signup-email").value;
        const password = document.getElementById("signup-password").value;
        const confirmPassword = document.getElementById(
          "signup-confirm-password"
        ).value;

        // Validation
        if (!name || !email || !password || !confirmPassword) {
          alert("Please fill in all fields.");
          return;
        }

        if (password !== confirmPassword) {
          alert("Passwords do not match.");
          return;
        }

        // Check if user already exists
        if (users.find((user) => user.email === email)) {
          alert("An account with this email already exists.");
          return;
        }

        // Create new user with rewards
        const newUser = createUserWithRewards({
          id: Date.now(),
          name,
          email,
          password,
          joined: new Date().toISOString(),
        });

        users.push(newUser);
        localStorage.setItem("acidicUsers", JSON.stringify(users));

        alert("Account created successfully! Welcome to ACIDIC Rewards!");
        showLogin();
      }

      // Login function
      function login() {
        const email = document.getElementById("login-email").value;
        const password = document.getElementById("login-password").value;

        const user = users.find(
          (u) => u.email === email && u.password === password
        );

        if (user) {
          // Ensure user has rewards structure
          if (!user.points) {
            currentUser = createUserWithRewards(user);
            // Update stored user data
            const users = JSON.parse(localStorage.getItem("acidicUsers")) || [];
            const userIndex = users.findIndex((u) => u.id === user.id);
            if (userIndex !== -1) {
              users[userIndex] = currentUser;
              localStorage.setItem("acidicUsers", JSON.stringify(users));
            }
          } else {
            currentUser = user;
          }

          localStorage.setItem("currentUser", JSON.stringify(currentUser));
          updateAuthLink();
          showMainContent();

          // Display rewards if available
          if (currentUser.points > 0) {
            displayUserRewards();
          }

          alert(`Welcome back, ${user.name}!`);
        } else {
          alert("Invalid email or password.");
        }
      }

      // Logout function
      function logout() {
        currentUser = null;
        localStorage.removeItem("currentUser");
        updateAuthLink();
        showMainContent();
        alert("You have been logged out.");
      }

      // Show login form
      function showLogin() {
        hideAllSections();
        document.getElementById("login-section").style.display = "flex";
      }

      // === HERO SLIDESHOW ===
      const slides = document.querySelectorAll(".hero-slide");
      const dots = document.querySelectorAll(".slideshow-dot");
      let currentSlide = 0;
      let slideInterval;

      function showSlide(index) {
        slides.forEach((slide) => slide.classList.remove("active"));
        dots.forEach((dot) => dot.classList.remove("active"));
        if (slides[index]) {
          slides[index].classList.add("active");
        }
        if (dots[index]) {
          dots[index].classList.add("active");
        }
        currentSlide = index;
        resetSlideInterval();
      }

      function nextSlide() {
        showSlide((currentSlide + 1) % slides.length);
      }

      function prevSlide() {
        showSlide((currentSlide - 1 + slides.length) % slides.length);
      }

      function goToSlide(index) {
        if (index >= 0 && index < slides.length) {
          showSlide(index);
        }
      }

      function resetSlideInterval() {
        clearInterval(slideInterval);
        slideInterval = setInterval(nextSlide, 4000);
      }

      resetSlideInterval();

      // === CART & MODALS ===
      const cart = [];
      let currentItem = null;
      const DELIVERY_FEE = 150;
      let currentPaymentTotal = 0;
      let selectedColor = "#000";
      let currentOutfit = { top: null, bottom: null, accessory: null };

      // === INNOVATIVE FEATURES ===

      // AI Stylist
      function showAIStylist() {
        hideAllSections();
        document.getElementById("ai-stylist-section").style.display = "block";
        resetQuiz();
      }

      function resetQuiz() {
        document.getElementById("quiz-step-1").style.display = "block";
        document.getElementById("quiz-step-2").style.display = "none";
        document.getElementById("quiz-step-3").style.display = "none";
        document.getElementById("ai-recommendations").innerHTML = "";
      }

      function nextQuizStep(step, choice) {
        if (step === 1) {
          document.getElementById("quiz-step-1").style.display = "none";
          document.getElementById("quiz-step-2").style.display = "block";
        } else if (step === 2) {
          document.getElementById("quiz-step-2").style.display = "none";
          document.getElementById("quiz-step-3").style.display = "block";
        }
      }

      function generateRecommendations() {
        const recommendations = document.getElementById("ai-recommendations");
        recommendations.innerHTML = "<h3>Recommended For You</h3>";

        // Generate some recommendations based on "user preferences"
        const recommendedItems = [
          products.tshirts[0],
          products.hoodies[0],
          products.pants[0],
          products.accessories[0],
        ];

        recommendedItems.forEach((item) => {
          const div = document.createElement("div");
          div.classList.add("product");
          div.innerHTML = `
            <img src="${item.img}" alt="${
            item.name
          }" onerror="handleImageError(this)">
            <div class="product-info">
                <h3>${item.name}</h3>
                <p>R${item.price}</p>
                <button class="add-to-cart" onclick="openModal(${JSON.stringify(
                  item
                ).replace(/"/g, "&quot;")})">View Details</button>
            </div>`;
          recommendations.appendChild(div);
        });

        document.getElementById("quiz-step-3").style.display = "none";
      }

      // Virtual Try-On
      function showVirtualTryOn() {
        hideAllSections();
        document.getElementById("virtual-tryon").style.display = "block";
      }

      function startWebcam() {
        alert(
          "Virtual try-on would use your camera to show how items look on you. For this demo, we're simulating the experience."
        );
        // In a real implementation, this would access the user's webcam
      }

      function tryOnProduct(type) {
        alert(
          `Trying on ${type}. In a full implementation, this would use AR to show the item on you.`
        );
      }

      // Sustainability
      function showSustainability() {
        hideAllSections();
        document.getElementById("sustainability").style.display = "block";

        // Animate the stats
        animateValue("water-saved", 0, 12450, 2000);
        animateValue("co2-saved", 0, 2840, 2000);
        animateValue("items-upcycled", 0, 1250, 2000);
      }

      function animateValue(id, start, end, duration) {
        const obj = document.getElementById(id);
        let startTimestamp = null;
        const step = (timestamp) => {
          if (!startTimestamp) startTimestamp = timestamp;
          const progress = Math.min((timestamp - startTimestamp) / duration, 1);
          const value = Math.floor(progress * (end - start) + start);
          obj.innerHTML =
            value.toLocaleString() +
            (id === "water-saved" ? "L" : id === "co2-saved" ? "kg" : "");
          if (progress < 1) {
            window.requestAnimationFrame(step);
          }
        };
        window.requestAnimationFrame(step);
      }

      // Community
      function showCommunity() {
        hideAllSections();
        document.getElementById("community").style.display = "block";
      }

      function uploadStyle() {
        alert(
          "In a full implementation, this would allow you to upload photos of yourself wearing ACIDIC clothing to share with the community."
        );
      }

      // Loyalty Program
      function showLoyaltyProgram() {
        hideAllSections();
        document.getElementById("loyalty-program").style.display = "block";
        if (currentUser) {
          displayUserRewards();
        }
      }

      // Outfit Builder
      function showOutfitBuilder() {
        hideAllSections();
        document.getElementById("outfit-builder").style.display = "block";
        showOutfitCategory("tshirts");
      }

      function showOutfitCategory(category) {
        const outfitProducts = document.getElementById("outfit-products");
        outfitProducts.innerHTML = "";

        if (products[category]) {
          products[category].forEach((item) => {
            const div = document.createElement("div");
            div.classList.add("outfit-product");
            div.innerHTML = `
                <img src="${item.img}" alt="${item.name}" onerror="handleImageError(this)">
                <div>
                    <h4>${item.name}</h4>
                    <p>R${item.price}</p>
                </div>`;
            div.onclick = () => addToOutfit(category, item);
            outfitProducts.appendChild(div);
          });
        }
      }

      function addToOutfit(category, item) {
        if (
          category === "tshirts" ||
          category === "sweaters" ||
          category === "hoodies"
        ) {
          currentOutfit.top = item;
          document.getElementById("top-layer").innerHTML = `
            <img src="${item.img}" alt="${item.name}" style="max-width: 200px;" onerror="handleImageError(this)">
            <h4>${item.name}</h4><p>R${item.price}</p>`;
          document.getElementById("bottom-layer").style.display = "block";
        } else if (category === "pants") {
          currentOutfit.bottom = item;
          document.getElementById("bottom-layer").innerHTML = `
            <img src="${item.img}" alt="${item.name}" style="max-width: 200px;" onerror="handleImageError(this)">
            <h4>${item.name}</h4><p>R${item.price}</p>`;
          document.getElementById("accessory-layer").style.display = "block";
        } else if (category === "accessories") {
          currentOutfit.accessory = item;
          document.getElementById("accessory-layer").innerHTML = `
            <img src="${item.img}" alt="${item.name}" style="max-width: 100px;" onerror="handleImageError(this)">
            <h4>${item.name}</h4><p>R${item.price}</p>`;
        }
      }

      function addOutfitToCart() {
        if (currentOutfit.top) {
          const size = "Medium"; // Default size for outfit items
          cart.push({
            name: currentOutfit.top.name + " (Outfit)",
            price: currentOutfit.top.price,
            size,
            qty: 1,
          });
        }
        if (currentOutfit.bottom) {
          const size = "Medium"; // Default size for outfit items
          cart.push({
            name: currentOutfit.bottom.name + " (Outfit)",
            price: currentOutfit.bottom.price,
            size,
            qty: 1,
          });
        }
        if (currentOutfit.accessory) {
          cart.push({
            name: currentOutfit.accessory.name + " (Outfit)",
            price: currentOutfit.accessory.price,
            size: "One Size",
            qty: 1,
          });
        }

        if (
          currentOutfit.top ||
          currentOutfit.bottom ||
          currentOutfit.accessory
        ) {
          updateCart();
          toggleCart(true);
          alert("Outfit added to cart!");
        } else {
          alert("Please add at least one item to your outfit.");
        }
      }

      // Customization
      function showCustomizeModal() {
        closeModal();
        document.getElementById("customize-modal").classList.add("active");
      }

      function closeCustomize() {
        document.getElementById("customize-modal").classList.remove("active");
      }

      function selectColor(element, color) {
        selectedColor = color;
        document.querySelectorAll(".color-option").forEach((opt) => {
          opt.classList.remove("active");
        });
        element.classList.add("active");
      }

      function addCustomizationToCart() {
        const size = document.getElementById("size").value;
        const customItem = {
          name: `${currentItem.name} (Custom - ${selectedColor})`,
          price: currentItem.price, // No extra cost for customization
          size,
          qty: 1,
          customizations: {
            color: selectedColor,
          },
        };

        cart.push(customItem);
        updateCart();
        toggleCart(true);
        closeCustomize();
        alert("Custom item added to cart!");
      }

      // Size Recommender
      function showSizeRecommender() {
        const modal = document.getElementById("size-recommender-modal");
        modal.classList.add("active");
      }

      function closeSizeRecommender() {
        document
          .getElementById("size-recommender-modal")
          .classList.remove("active");
      }

      function calculateSize() {
        const height = parseInt(document.getElementById("user-height").value);
        const weight = parseInt(document.getElementById("user-weight").value);
        const fit = document.getElementById("preferred-fit").value;

        if (!height || !weight) {
          alert("Please enter your height and weight.");
          return;
        }

        let size = "Medium"; // Default

        // Simple size calculation logic
        if (height < 165) {
          size = fit === "oversized" ? "Medium" : "Small";
        } else if (height >= 165 && height < 180) {
          if (weight < 70) {
            size =
              fit === "slim"
                ? "Small"
                : fit === "oversized"
                ? "Large"
                : "Medium";
          } else {
            size =
              fit === "slim"
                ? "Medium"
                : fit === "oversized"
                ? "Extra Large"
                : "Large";
          }
        } else {
          size = fit === "slim" ? "Large" : "Extra Large";
        }

        document.getElementById(
          "size-result"
        ).textContent = `Recommended Size: ${size}`;
      }

      // Utility function to hide all sections
      function hideAllSections() {
        document.getElementById("main-content").style.display = "none";
        document.getElementById("product-section").style.display = "none";
        document.getElementById("ai-stylist-section").style.display = "none";
        document.getElementById("virtual-tryon").style.display = "none";
        document.getElementById("sustainability").style.display = "none";
        document.getElementById("community").style.display = "none";
        document.getElementById("loyalty-program").style.display = "none";
        document.getElementById("outfit-builder").style.display = "none";
        document.getElementById("signup-section").style.display = "none";
        document.getElementById("login-section").style.display = "none";
      }

      // === ORIGINAL FUNCTIONALITY ===
      function showCategory(category) {
        hideAllSections();
        const section = document.getElementById("product-section");
        const mainContent = document.getElementById("main-content");
        section.style.display = "grid";
        mainContent.style.display = "block";
        section.classList.remove("active");
        section.innerHTML = "";

        if (products[category]) {
          setTimeout(() => {
            products[category].forEach((item) => {
              const div = document.createElement("div");
              div.classList.add("product");
              div.innerHTML = `
                    <img src="${item.img}" alt="${item.name}" onerror="handleImageError(this)">
                    <div class="product-info">
                        <h3>${item.name}</h3>
                        <p>R${item.price}</p>
                    </div>`;
              div.onclick = () => openModal(item);
              section.appendChild(div);
            });
            requestAnimationFrame(() => section.classList.add("active"));
          }, 150);
        }
      }

      function openModal(item) {
        currentItem = item;
        document.getElementById("modal-img").src = item.img;
        document.getElementById("modal-name").textContent = item.name;
        document.getElementById("modal-price").textContent = "R" + item.price;
        document.getElementById("product-modal").classList.add("active");
      }

      function closeModal() {
        document.getElementById("product-modal").classList.remove("active");
      }

      function addSelectedToCart() {
        const size = document.getElementById("size").value;
        const existing = cart.find(
          (i) => i.name === currentItem.name && i.size === size
        );
        if (existing) {
          existing.qty++;
        } else {
          cart.push({
            name: currentItem.name,
            price: currentItem.price,
            size,
            qty: 1,
          });
        }
        updateCart();
        toggleCart(true);
        closeModal();
      }

      function updateCart() {
        const cartItems = document.getElementById("cart-items");
        const totalEl = document.getElementById("cart-total");
        cartItems.innerHTML = "";
        let total = 0;
        cart.forEach((item, index) => {
          total += item.price * item.qty;
          const div = document.createElement("div");
          div.classList.add("cart-item");
          div.innerHTML = `
            <span>${item.name} (${item.size}) x${item.qty}</span>
            <span>R${item.price * item.qty}</span>
            <button onclick="removeFromCart(${index})">X</button>`;
          cartItems.appendChild(div);
        });
        totalEl.textContent = "R" + total;
      }

      function removeFromCart(index) {
        if (index >= 0 && index < cart.length) {
          cart.splice(index, 1);
          updateCart();
        }
      }

      function toggleCart(show) {
        document
          .getElementById("cart-sidebar")
          .classList.toggle("active", show);
      }

      function checkout() {
        if (cart.length === 0) {
          alert("Your cart is empty!");
          return;
        }
        toggleCart(false);
        const subtotal = cart.reduce((sum, i) => sum + i.price * i.qty, 0);
        const finalTotal = applyRewardsBenefits(subtotal + DELIVERY_FEE);
        document.getElementById("final-total").textContent = "R" + finalTotal;
        document.getElementById("checkout-modal").classList.add("active");
      }

      function closeCheckout() {
        document.getElementById("checkout-modal").classList.remove("active");
      }

      // Enhanced validation for checkout form
      function validateCheckoutForm() {
        const fields = [
          {
            id: "country",
            errorId: "country-error",
            validator: (value) => value.trim().length > 0,
          },
          {
            id: "fname",
            errorId: "fname-error",
            validator: (value) => value.trim().length > 0,
          },
          {
            id: "lname",
            errorId: "lname-error",
            validator: (value) => value.trim().length > 0,
          },
          {
            id: "address",
            errorId: "address-error",
            validator: (value) => value.trim().length > 5,
          },
          {
            id: "city",
            errorId: "city-error",
            validator: (value) => value.trim().length > 0,
          },
          {
            id: "province",
            errorId: "province-error",
            validator: (value) => value.trim().length > 0,
          },
          {
            id: "postal",
            errorId: "postal-error",
            validator: (value) => /^[0-9]{4,10}$/.test(value),
          },
          {
            id: "phone",
            errorId: "phone-error",
            validator: (value) => /^[0-9+\-\s]{10,15}$/.test(value),
          },
          {
            id: "email",
            errorId: "email-error",
            validator: (value) => /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value),
          },
        ];

        let isValid = true;

        // Reset all error states
        fields.forEach((field) => {
          const input = document.getElementById(field.id);
          const error = document.getElementById(field.errorId);
          input.classList.remove("error");
          error.style.display = "none";
        });

        // Validate each field
        fields.forEach((field) => {
          const input = document.getElementById(field.id);
          const error = document.getElementById(field.errorId);
          const value = input.value.trim();

          if (!field.validator(value)) {
            input.classList.add("error");
            error.style.display = "block";
            isValid = false;

            // Focus on first invalid field
            if (isValid === false) {
              input.focus();
              isValid = null; // Prevent multiple focus calls
            }
          }
        });

        if (isValid) {
          proceedToPayment();
        } else {
          alert("Please correct the errors in the form before proceeding.");
        }
      }

      function proceedToPayment() {
        // Calculate total for payment
        const subtotal = cart.reduce((sum, i) => sum + i.price * i.qty, 0);
        currentPaymentTotal = applyRewardsBenefits(subtotal + DELIVERY_FEE);

        // Update payment modal with order details
        document.getElementById("payment-amount").textContent =
          "R" + currentPaymentTotal;
        document.getElementById("payment-total").textContent =
          "R" + currentPaymentTotal;

        const paymentOrderItems = document.getElementById(
          "payment-order-items"
        );
        paymentOrderItems.innerHTML = "";

        cart.forEach((item) => {
          const itemDiv = document.createElement("div");
          itemDiv.classList.add("order-item");
          itemDiv.innerHTML = `
            <span>${item.name} (${item.size}) x${item.qty}</span>
            <span>R${item.price * item.qty}</span>`;
          paymentOrderItems.appendChild(itemDiv);
        });

        // Add delivery fee if applicable
        if (DELIVERY_FEE > 0 && !currentUser?.benefits?.freeDelivery) {
          const deliveryDiv = document.createElement("div");
          deliveryDiv.classList.add("order-item");
          deliveryDiv.innerHTML = `
            <span>Delivery Fee</span>
            <span>R${DELIVERY_FEE}</span>`;
          paymentOrderItems.appendChild(deliveryDiv);
        }

        // Close checkout and open payment modal
        closeCheckout();
        document.getElementById("payment-modal").classList.add("active");
      }

      function closePayment() {
        document.getElementById("payment-modal").classList.remove("active");
      }

      // === SIGN UP FUNCTIONALITY ===
      function showSignUp() {
        hideAllSections();
        document.getElementById("signup-section").style.display = "flex";
      }

      function showMainContent() {
        hideAllSections();
        document.getElementById("main-content").style.display = "block";
        document.getElementById("product-section").style.display = "grid";
      }

      // Initialize with T-Shirts category and update auth link
      showCategory("tshirts");
      updateAuthLink();
    </script>
    <!-- Firebase SDK -->
    <script type="module">
      // Import Firebase core + needed modules
      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
      import {
        getAuth,
        createUserWithEmailAndPassword,
        signInWithEmailAndPassword,
        signOut,
      } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
      import {
        getFirestore,
        doc,
        setDoc,
        getDoc,
        collection,
        addDoc,
        getDocs,
        updateDoc,
        arrayUnion,
      } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";
      import {
        getStorage,
        ref,
        uploadBytes,
        getDownloadURL,
      } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-storage.js";

      // === Your Firebase config ===
      const firebaseConfig = {
        apiKey: "YOUR_API_KEY",
        authDomain: "acidic-clothing.firebaseapp.com",
        projectId: "acidic-clothing",
        storageBucket: "acidic-clothing.appspot.com",
        messagingSenderId: "XXXXXXXXXXX",
        appId: "XXXXXXXXXXXXXX",
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      const db = getFirestore(app);
      const storage = getStorage(app);

      window.auth = auth;
      window.db = db;
      window.storage = storage;
    </script>
  </body>
</html>
